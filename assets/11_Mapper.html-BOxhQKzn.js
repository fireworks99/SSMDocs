import{_ as k,c as d,d as s,a as i,b as p,w as t,r as c,o as m,e as n}from"./app-2iUjMBTo.js";const v="/SSMDocs/assets/Rowbounds-HP13MqHz.png",g="/SSMDocs/assets/Employee-CtKJQSW2.svg",b="/SSMDocs/assets/chapter5_cascade-C6QQNc8j.png",q="/SSMDocs/assets/user_role-BJkTh9Ri.svg",y={},h={class:"table-of-contents"};function f(w,a){const e=c("router-link"),u=c("Tabs"),r=c("CodeTabs");return m(),d("div",null,[a[43]||(a[43]=s("h1",{id:"映射器",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#映射器"},[s("span",null,"映射器")])],-1)),s("nav",h,[s("ul",null,[s("li",null,[p(e,{to:"#_1-概述"},{default:t(()=>[...a[0]||(a[0]=[n("1.概述",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_2-select"},{default:t(()=>[...a[1]||(a[1]=[n("2.select",-1)])]),_:1}),s("ul",null,[s("li",null,[p(e,{to:"#_1-常用属性"},{default:t(()=>[...a[2]||(a[2]=[n("①.常用属性",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_2-多个参数"},{default:t(()=>[...a[3]||(a[3]=[n("②.多个参数",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_3resultmap"},{default:t(()=>[...a[4]||(a[4]=[n("③resultMap",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_4-rowbounds"},{default:t(()=>[...a[5]||(a[5]=[n("④.RowBounds",-1)])]),_:1})])])]),s("li",null,[p(e,{to:"#_3-insert"},{default:t(()=>[...a[6]||(a[6]=[n("3.insert",-1)])]),_:1}),s("ul",null,[s("li",null,[p(e,{to:"#_1-主键回填"},{default:t(()=>[...a[7]||(a[7]=[n("①.主键回填",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_2自定义主键"},{default:t(()=>[...a[8]||(a[8]=[n("②自定义主键",-1)])]),_:1})])])]),s("li",null,[p(e,{to:"#_4-resulttype-map"},{default:t(()=>[...a[9]||(a[9]=[n("4.resultType=map",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_5-sql"},{default:t(()=>[...a[10]||(a[10]=[n("5.sql",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_6-级联"},{default:t(()=>[...a[11]||(a[11]=[n("6.级联",-1)])]),_:1}),s("ul",null,[s("li",null,[p(e,{to:"#_1-示例"},{default:t(()=>[...a[12]||(a[12]=[n("①.示例",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_2-dto"},{default:t(()=>[...a[13]||(a[13]=[n("②.DTO",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_3-n-1问题"},{default:t(()=>[...a[14]||(a[14]=[n("③.N+1问题",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_4-延迟加载-懒加载"},{default:t(()=>[...a[15]||(a[15]=[n("④.延迟加载（懒加载）",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_5-join实现级联"},{default:t(()=>[...a[16]||(a[16]=[n("⑤.JOIN实现级联",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_6-多对多级联"},{default:t(()=>[...a[17]||(a[17]=[n("⑥.多对多级联",-1)])]),_:1})])])]),s("li",null,[p(e,{to:"#_7-缓存"},{default:t(()=>[...a[18]||(a[18]=[n("7.缓存",-1)])]),_:1}),s("ul",null,[s("li",null,[p(e,{to:"#_1-一级缓存"},{default:t(()=>[...a[19]||(a[19]=[n("①.一级缓存",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_2-二级缓存"},{default:t(()=>[...a[20]||(a[20]=[n("②.二级缓存",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_3-最佳实践"},{default:t(()=>[...a[21]||(a[21]=[n("③.最佳实践",-1)])]),_:1})])])]),s("li",null,[p(e,{to:"#_8-存储过程"},{default:t(()=>[...a[22]||(a[22]=[n("8.存储过程",-1)])]),_:1}),s("ul",null,[s("li",null,[p(e,{to:"#_1-in参数"},{default:t(()=>[...a[23]||(a[23]=[n("①.IN参数",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_2-out参数"},{default:t(()=>[...a[24]||(a[24]=[n("②.OUT参数",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_3-in-out参数组合"},{default:t(()=>[...a[25]||(a[25]=[n("③.IN+OUT参数组合",-1)])]),_:1})]),s("li",null,[p(e,{to:"#_4-返回结果集"},{default:t(()=>[...a[26]||(a[26]=[n("④.返回结果集",-1)])]),_:1})])])])])]),a[44]||(a[44]=i(`<h2 id="_1-概述" tabindex="-1"><a class="header-anchor" href="#_1-概述"><span>1.概述</span></a></h2><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token comment">&lt;!-- 基础配置类元素 --&gt;</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache-ref</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parameterMap</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">&lt;!-- SQL 构建元素（可复用 SQL 片段） --&gt;</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">&lt;!-- CRUD 元素（核心） --&gt;</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">&lt;!-- 结果映射元素 --&gt;</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>discriminator</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-select" tabindex="-1"><a class="header-anchor" href="#_2-select"><span>2.select</span></a></h2><h3 id="_1-常用属性" tabindex="-1"><a class="header-anchor" href="#_1-常用属性"><span>①.常用属性</span></a></h3><table><thead><tr><th>属性名</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><strong>id</strong></td><td>对应 Mapper 接口的方法名</td><td>id=&quot;findUserById&quot;</td></tr><tr><td><strong>parameterType</strong></td><td>入参类型，可写类全路径、别名、Map、基本类型</td><td>parameterType=&quot;int&quot;</td></tr><tr><td><strong>resultType</strong></td><td>返回类型（对象/基本类型/Map）</td><td>resultType=&quot;com.xx.User&quot;</td></tr><tr><td><strong>resultMap</strong></td><td>使用自定义映射时使用</td><td>resultMap=&quot;userResultMap&quot;</td></tr><tr><td><strong>flushCache</strong></td><td>是否刷新缓存（查询默认 false）</td><td>flushCache=&quot;false&quot;</td></tr><tr><td><strong>useCache</strong></td><td>是否使用二级缓存（默认 true）</td><td>useCache=&quot;true&quot;</td></tr><tr><td><strong>timeout</strong></td><td>超时毫秒数，少用</td><td>timeout=&quot;5000&quot;</td></tr><tr><td><strong>fetchSize</strong></td><td>一次拉取多少条记录</td><td>fetchSize=&quot;100&quot;</td></tr></tbody></table><h3 id="_2-多个参数" tabindex="-1"><a class="header-anchor" href="#_2-多个参数"><span>②.多个参数</span></a></h3><ol><li>Map传参 <ul><li>优点：几乎适应所有场景</li><li>缺点： <ul><li>可读性差</li><li>不能限定参数的类型</li></ul></li></ul></li><li>注解传参 <ul><li>优点： <ul><li>可读性好</li><li>可以限定参数的类型</li></ul></li><li>缺点：参数较多时写起来麻烦</li></ul></li><li>Java Bean传参 <ul><li>优点：即使参数多，只需传一个对象</li><li>缺点：复杂场景可能另外需要注解传参</li></ul></li><li>混合传参（注解 + Java Bean） <ul><li>优点：可以应对复杂场景</li></ul></li></ol><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">PageParam</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Role</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Param</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RoleMapper</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Role</span> <span class="token function">getRole</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> <span class="token function">findRolesByMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> parameterMap<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> <span class="token function">findRolesByAnnotation</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;roleName&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> roleName<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;note&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> note<span class="token punctuation">)</span> <span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> <span class="token function">findRolesByBean</span><span class="token punctuation">(</span><span class="token class-name">Role</span> role<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByMix</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;params&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Role</span> role<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;page&quot;</span><span class="token punctuation">)</span> <span class="token class-name">PageParam</span> <span class="token class-name">PageParam</span><span class="token punctuation">)</span> <span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span>
<span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span>
<span class="line">        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5.mapper.RoleMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getRole<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        select id, role_name as roleName, note from t_role where id = #{id}</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findRolesByMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        select id, role_name as roleName, note from t_role</span>
<span class="line">        where role_name like concat(&#39;%&#39;, #{roleName}, &#39;%&#39;)</span>
<span class="line">        and note like concat(&#39;%&#39;, #{note}, &#39;%&#39;)</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findRolesByAnnotation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        select id, role_name as roleName, note from t_role</span>
<span class="line">        where role_name like concat(&#39;%&#39;, #{roleName}, &#39;%&#39;)</span>
<span class="line">        and note like concat(&#39;%&#39;, #{note}, &#39;%&#39;)</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findRolesByBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5.pojo.Role<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        select id, role_name as roleName, note from t_role</span>
<span class="line">        where role_name like concat(&#39;%&#39;, #{roleName}, &#39;%&#39;)</span>
<span class="line">        and note like concat(&#39;%&#39;, #{note}, &#39;%&#39;)</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findByMix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bind</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>offset<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(page.pageNo - 1) * page.pageSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        select id, role_name as roleName, note from t_role</span>
<span class="line">        where role_name like concat(&#39;%&#39;, #{params.roleName}, &#39;%&#39;)</span>
<span class="line">        and note like concat(&#39;%&#39;, #{params.note}, &#39;%&#39;)</span>
<span class="line">        limit #{offset}, #{page.pageSize}</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>main</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">PageParam</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Role</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryUtils</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">RoleMapper</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">            sqlSession <span class="token operator">=</span> <span class="token class-name">SqlSessionFactoryUtils</span><span class="token punctuation">.</span><span class="token function">openSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">RoleMapper</span> roleMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">RoleMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">Role</span> role <span class="token operator">=</span> roleMapper<span class="token punctuation">.</span><span class="token function">getRole</span><span class="token punctuation">(</span><span class="token number">11L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>role<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 1.Map传参</span></span>
<span class="line">            <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> hashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;roleName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;is&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;note&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;st&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> rolesByMap <span class="token operator">=</span> roleMapper<span class="token punctuation">.</span><span class="token function">findRolesByMap</span><span class="token punctuation">(</span>hashMap<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rolesByMap<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 2.注解传参</span></span>
<span class="line">            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> rolesByAnnotation <span class="token operator">=</span> roleMapper<span class="token punctuation">.</span><span class="token function">findRolesByAnnotation</span><span class="token punctuation">(</span><span class="token string">&quot;is&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;st&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rolesByAnnotation<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 3.Java Bean传参</span></span>
<span class="line">            <span class="token class-name">Role</span> role1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Role</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            role1<span class="token punctuation">.</span><span class="token function">setRoleName</span><span class="token punctuation">(</span><span class="token string">&quot;is&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            role1<span class="token punctuation">.</span><span class="token function">setNote</span><span class="token punctuation">(</span><span class="token string">&quot;st&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> rolesByBean <span class="token operator">=</span> roleMapper<span class="token punctuation">.</span><span class="token function">findRolesByBean</span><span class="token punctuation">(</span>role1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rolesByBean<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 4.混合传参(注解 + Java Bean)</span></span>
<span class="line">            <span class="token class-name">PageParam</span> pageParam <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageParam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            pageParam<span class="token punctuation">.</span><span class="token function">setPageNo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            pageParam<span class="token punctuation">.</span><span class="token function">setPageSize</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> byMix <span class="token operator">=</span> roleMapper<span class="token punctuation">.</span><span class="token function">findByMix</span><span class="token punctuation">(</span>role1<span class="token punctuation">,</span> pageParam<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>byMix<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//提交事务</span></span>
<span class="line">            sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span><span class="token punctuation">(</span>sqlSession <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                sqlSession<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>sqlSession <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3resultmap" tabindex="-1"><a class="header-anchor" href="#_3resultmap"><span>③resultMap</span></a></h3><blockquote><p>有了resultType，为什么还需要resultMap？</p></blockquote><p>使用 <code>resultType</code> 时，MyBatis 会直接把 <strong>column → property</strong> 自动转换，但这只适合：</p><ul><li>字段名和属性名一致</li><li>一张表对应一个简单实体类</li><li>没有关联对象</li></ul><p>但真实业务远比这个复杂。</p><p>当出现以下情况时，就必须使用 <code>resultMap</code>：</p><ol><li>多表联查</li><li>一对多映射</li><li>嵌套查询</li><li>多态</li></ol><p>User.java</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Integer</span> sex<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Dept</span> dept<span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Dept.java</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dept</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>UserMapper.java</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>UserMapper.xml</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span>
<span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span>
<span class="line">        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5.mapper.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deptId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deptName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        select u.id, u.username, d.id as deptId, d.name as deptName</span>
<span class="line">        from t_user u join dept d on u.deptId = d.id where u.id = #{id}</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Main.java</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">User</span> user1 <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">User</span> user2 <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token number">2L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//User{id=1, username=&#39;admin&#39;, password=&#39;null&#39;, sex=null, deptId=1, deptName=&#39;技术部&#39;}</span></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//User{id=2, username=&#39;user&#39;, password=&#39;null&#39;, sex=null, deptId=2, deptName=&#39;业务部&#39;}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-rowbounds" tabindex="-1"><a class="header-anchor" href="#_4-rowbounds"><span>④.RowBounds</span></a></h3><p>Mybatis自带的<strong>逻辑分页（内存分页）</strong>，而非<strong>物理分页（数据库分页）</strong>。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserRowBounds</span><span class="token punctuation">(</span><span class="token class-name">RowBounds</span> rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    select u.id, u.username, d.id as deptId, d.name as deptName</span>
<span class="line">    from t_user u join dept d on u.deptId = d.id where u.id = #{id}</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserRowBounds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    select u.id, u.username, d.id as deptId, d.name as deptName</span>
<span class="line">    from t_user u join dept d on u.deptId = d.id</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// RowBounds</span></span>
<span class="line"><span class="token class-name">RowBounds</span> rowBounds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RowBounds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getUserRowBounds</span><span class="token punctuation">(</span>rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>users<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+v+`" alt="RowBounds"></p><ul><li>数据库分页：效果最佳</li><li>后端逻辑分页： <ul><li>若数据库与后端程序属于同一服务器，则从数据库取出数据后占用大量内存。</li><li>若数据库与后端程序不在同一服务器，则数据库所在服务器占用大量内存，且传输大量数据，且占用后端服务器大量内存。</li></ul></li><li>前端逻辑分页： <ul><li>传输大量数据，用户等待时间长，体验差。</li></ul></li></ul><h2 id="_3-insert" tabindex="-1"><a class="header-anchor" href="#_3-insert"><span>3.insert</span></a></h2><h3 id="_1-主键回填" tabindex="-1"><a class="header-anchor" href="#_1-主键回填"><span>①.主键回填</span></a></h3><blockquote><p>什么是主键回填：MyBatis 中 <code>insert</code> 拿到数据库自动生成的主键（自增 id）</p></blockquote><p>应用场景：insert 一条记录 =&gt; 拿到生成的 id =&gt; 用这个 id 插入子表 / 关联表</p><p>三种方式：</p><ol><li>useGeneratedKeys</li><li><code>&lt;selectKey&gt;</code></li><li>Mapper 方法直接返回主键（原本返回影响行数）（不推荐）</li></ol><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Dept</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptMapper</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> <span class="token function">insertDept</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> <span class="token function">insertDept2</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> <span class="token function">insertDeptBefore</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> <span class="token function">insertDeptAfter</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span>
<span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span>
<span class="line">        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5.mapper.DeptMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertDept<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        insert into dept(name) values(#{name})</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertDept2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        insert into dept(name) values(#{name})</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertDeptBefore<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BEFORE<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            select if (max(id) = null, 1, max(id) + 3) from dept</span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        insert into dept(id, name) values(#{id}, #{name})</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertDeptAfter<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        insert into dept(name) values(#{name})</span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AFTER<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            select last_insert_id()</span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// insert</span></span>
<span class="line"><span class="token class-name">DeptMapper</span> deptMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">DeptMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Dept</span> dept <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">dept<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;销售部&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">deptMapper<span class="token punctuation">.</span><span class="token function">insertDept</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dept<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Dept{id=null, name=&#39;销售部&#39;}</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Dept</span> dept1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">dept1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;运维部&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">deptMapper<span class="token punctuation">.</span><span class="token function">insertDept2</span><span class="token punctuation">(</span>dept1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dept1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Dept{id=8, name=&#39;运维部&#39;}</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Dept</span> deptBefore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">deptBefore<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;Before部&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">deptMapper<span class="token punctuation">.</span><span class="token function">insertDeptBefore</span><span class="token punctuation">(</span>deptBefore<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>deptBefore<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Dept{id=11, name=&#39;Before部&#39;}</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Dept</span> deptAfter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">deptAfter<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;After部&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">deptMapper<span class="token punctuation">.</span><span class="token function">insertDeptAfter</span><span class="token punctuation">(</span>deptAfter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>deptAfter<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Dept{id=12, name=&#39;After部&#39;}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2自定义主键" tabindex="-1"><a class="header-anchor" href="#_2自定义主键"><span>②自定义主键</span></a></h3><p>上述例子中<code>insertDeptBefore</code>通过<code>selectKey</code>实现了自定义主键（最大id + 3）</p><h2 id="_4-resulttype-map" tabindex="-1"><a class="header-anchor" href="#_4-resulttype-map"><span>4.resultType=map</span></a></h2><blockquote><p><code>resultType=&quot;map&quot;</code> 是 MyBatis 的“<strong>万金油返回类型</strong>”， 适合“不规则结果集”，但不适合“核心业务模型”。</p></blockquote><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectDynamicColumns</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;columns&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> columns<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectDynamicColumns<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    select \${columns} from t_user</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// Dynamic column + resultType=map</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectDynamicColumns</span><span class="token punctuation">(</span><span class="token string">&quot;id,username,deptId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//[{deptId=1, id=1, username=admin}, {deptId=2, id=2, username=user}]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里还用到了动态列，不过它有SQL注入风险，可通过Java层枚举白名单或xml choose白名单来避免。</p><h2 id="_5-sql" tabindex="-1"><a class="header-anchor" href="#_5-sql"><span>5.sql</span></a></h2><p><code>&lt;sql&gt;</code> 标签用于 <strong>定义可重用的 SQL 片段</strong>，可以在其他 SQL 语句中通过 <code>&lt;include&gt;</code> 引用。</p><ul><li><strong>不单独执行</strong>，只是“片段”</li><li>支持 <strong>动态 SQL / 参数</strong></li><li>可以减少重复代码，增加可维护性</li></ul><p>应用场景：</p>`,55)),p(u,{data:[{id:"复用列名"},{id:"复用条件"},{id:"复用JOIN"},{id:"动态SQL"}]},{title0:t(({value:l,isActive:o})=>[...a[27]||(a[27]=[n("复用列名",-1)])]),title1:t(({value:l,isActive:o})=>[...a[28]||(a[28]=[n("复用条件",-1)])]),title2:t(({value:l,isActive:o})=>[...a[29]||(a[29]=[n("复用JOIN",-1)])]),title3:t(({value:l,isActive:o})=>[...a[30]||(a[30]=[n("动态SQL",-1)])]),tab0:t(({value:l,isActive:o})=>[...a[31]||(a[31]=[s("div",{class:"language-xml line-numbers-mode","data-highlighter":"prismjs","data-ext":"xml"},[s("pre",null,[s("code",{class:"language-xml"},[s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("sql")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("baseColumns"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"    id, username, age"),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("sql")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("select")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("selectAll"),s("span",{class:"token punctuation"},'"')]),n(),s("span",{class:"token attr-name"},"resultType"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("User"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    SELECT "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("include")]),n(),s("span",{class:"token attr-name"},"refid"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("baseColumns"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},"/>")]),n(" FROM t_user")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("select")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("select")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("selectById"),s("span",{class:"token punctuation"},'"')]),n(),s("span",{class:"token attr-name"},"resultType"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("User"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    SELECT "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("include")]),n(),s("span",{class:"token attr-name"},"refid"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("baseColumns"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},"/>")]),n(" FROM t_user WHERE id = #{id}")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("select")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])]),tab1:t(({value:l,isActive:o})=>[...a[32]||(a[32]=[s("div",{class:"language-xml line-numbers-mode","data-highlighter":"prismjs","data-ext":"xml"},[s("pre",null,[s("code",{class:"language-xml"},[s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("sql")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("userWhere"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("where")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("        "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("if")]),n(),s("span",{class:"token attr-name"},"test"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("username != null"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"            username = #{username}"),n(`
`),s("span",{class:"line"},[n("        "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("if")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("        "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("if")]),n(),s("span",{class:"token attr-name"},"test"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("age != null"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"            AND age = #{age}"),n(`
`),s("span",{class:"line"},[n("        "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("if")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("where")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("sql")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("select")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("selectUser"),s("span",{class:"token punctuation"},'"')]),n(),s("span",{class:"token attr-name"},"resultType"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("User"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"    SELECT * FROM t_user"),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("include")]),n(),s("span",{class:"token attr-name"},"refid"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("userWhere"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},"/>")])]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("select")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])]),tab2:t(({value:l,isActive:o})=>[...a[33]||(a[33]=[s("div",{class:"language-xml line-numbers-mode","data-highlighter":"prismjs","data-ext":"xml"},[s("pre",null,[s("code",{class:"language-xml"},[s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("sql")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("joinDept"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"    JOIN dept d ON u.dept_id = d.id"),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("sql")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("select")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("selectUserDept"),s("span",{class:"token punctuation"},'"')]),n(),s("span",{class:"token attr-name"},"resultType"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("User"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"    SELECT u.id, u.username, d.name AS deptName"),n(`
`),s("span",{class:"line"},"    FROM t_user u"),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("include")]),n(),s("span",{class:"token attr-name"},"refid"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("joinDept"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},"/>")])]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("select")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])]),tab3:t(({value:l,isActive:o})=>[...a[34]||(a[34]=[s("div",{class:"language-xml line-numbers-mode","data-highlighter":"prismjs","data-ext":"xml"},[s("pre",null,[s("code",{class:"language-xml"},[s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("sql")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("dynamicColumns"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("if")]),n(),s("span",{class:"token attr-name"},"test"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("includeAge"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"        age,"),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("if")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"    username, id"),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("sql")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("select")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("selectUserDynamic"),s("span",{class:"token punctuation"},'"')]),n(),s("span",{class:"token attr-name"},"resultType"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("User"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    SELECT "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("include")]),n(),s("span",{class:"token attr-name"},"refid"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("dynamicColumns"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},"/>")]),n(" FROM t_user")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("select")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])]),_:1}),p(r,{data:[{id:"复用列名"},{id:"复用条件"},{id:"复用JOIN"},{id:"动态SQL"}]},{title0:t(({value:l,isActive:o})=>[...a[35]||(a[35]=[n("复用列名",-1)])]),title1:t(({value:l,isActive:o})=>[...a[36]||(a[36]=[n("复用条件",-1)])]),title2:t(({value:l,isActive:o})=>[...a[37]||(a[37]=[n("复用JOIN",-1)])]),title3:t(({value:l,isActive:o})=>[...a[38]||(a[38]=[n("动态SQL",-1)])]),tab0:t(({value:l,isActive:o})=>[...a[39]||(a[39]=[s("div",{class:"language-xml line-numbers-mode","data-highlighter":"prismjs","data-ext":"xml"},[s("pre",null,[s("code",{class:"language-xml"},[s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("sql")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("baseColumns"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"    id, username, age"),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("sql")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("select")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("selectAll"),s("span",{class:"token punctuation"},'"')]),n(),s("span",{class:"token attr-name"},"resultType"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("User"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    SELECT "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("include")]),n(),s("span",{class:"token attr-name"},"refid"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("baseColumns"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},"/>")]),n(" FROM t_user")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("select")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("select")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("selectById"),s("span",{class:"token punctuation"},'"')]),n(),s("span",{class:"token attr-name"},"resultType"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("User"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    SELECT "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("include")]),n(),s("span",{class:"token attr-name"},"refid"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("baseColumns"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},"/>")]),n(" FROM t_user WHERE id = #{id}")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("select")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])]),tab1:t(({value:l,isActive:o})=>[...a[40]||(a[40]=[s("div",{class:"language-xml line-numbers-mode","data-highlighter":"prismjs","data-ext":"xml"},[s("pre",null,[s("code",{class:"language-xml"},[s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("sql")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("userWhere"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("where")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("        "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("if")]),n(),s("span",{class:"token attr-name"},"test"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("username != null"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"            username = #{username}"),n(`
`),s("span",{class:"line"},[n("        "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("if")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("        "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("if")]),n(),s("span",{class:"token attr-name"},"test"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("age != null"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"            AND age = #{age}"),n(`
`),s("span",{class:"line"},[n("        "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("if")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("where")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("sql")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("select")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("selectUser"),s("span",{class:"token punctuation"},'"')]),n(),s("span",{class:"token attr-name"},"resultType"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("User"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"    SELECT * FROM t_user"),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("include")]),n(),s("span",{class:"token attr-name"},"refid"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("userWhere"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},"/>")])]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("select")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])]),tab2:t(({value:l,isActive:o})=>[...a[41]||(a[41]=[s("div",{class:"language-xml line-numbers-mode","data-highlighter":"prismjs","data-ext":"xml"},[s("pre",null,[s("code",{class:"language-xml"},[s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("sql")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("joinDept"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"    JOIN dept d ON u.dept_id = d.id"),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("sql")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("select")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("selectUserDept"),s("span",{class:"token punctuation"},'"')]),n(),s("span",{class:"token attr-name"},"resultType"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("User"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"    SELECT u.id, u.username, d.name AS deptName"),n(`
`),s("span",{class:"line"},"    FROM t_user u"),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("include")]),n(),s("span",{class:"token attr-name"},"refid"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("joinDept"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},"/>")])]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("select")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])]),tab3:t(({value:l,isActive:o})=>[...a[42]||(a[42]=[s("div",{class:"language-xml line-numbers-mode","data-highlighter":"prismjs","data-ext":"xml"},[s("pre",null,[s("code",{class:"language-xml"},[s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("sql")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("dynamicColumns"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("if")]),n(),s("span",{class:"token attr-name"},"test"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("includeAge"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"        age,"),n(`
`),s("span",{class:"line"},[n("    "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("if")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},"    username, id"),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("sql")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("select")]),n(),s("span",{class:"token attr-name"},"id"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("selectUserDynamic"),s("span",{class:"token punctuation"},'"')]),n(),s("span",{class:"token attr-name"},"resultType"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("User"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"},[n("    SELECT "),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),n("include")]),n(),s("span",{class:"token attr-name"},"refid"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),n("dynamicColumns"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},"/>")]),n(" FROM t_user")]),n(`
`),s("span",{class:"line"},[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),n("select")]),s("span",{class:"token punctuation"},">")])]),n(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])]),_:1}),a[45]||(a[45]=i('<h2 id="_6-级联" tabindex="-1"><a class="header-anchor" href="#_6-级联"><span>6.级联</span></a></h2><h3 id="_1-示例" tabindex="-1"><a class="header-anchor" href="#_1-示例"><span>①.示例</span></a></h3><p><img src="'+g+`" alt="表结构"></p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">use</span> ssm<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_employee <span class="token punctuation">(</span></span>
<span class="line">  id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span> </span>
<span class="line">  real_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  sex <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;1-男 0-女&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  birthday <span class="token keyword">DATE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  mobile <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  POSITION <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  note <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_employee_task <span class="token punctuation">(</span></span>
<span class="line">  id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  emp_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  task_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  task_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  note <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_female_health_form <span class="token punctuation">(</span></span>
<span class="line">  id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span> </span>
<span class="line">  emp_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  heart <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  liver <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  spleen <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  lung <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  kidney <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  uterus <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  note <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_male_health_form <span class="token punctuation">(</span></span>
<span class="line">  id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span> </span>
<span class="line">  emp_id <span class="token keyword">INT</span> <span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  heart <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  liver <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  spleen <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  lung <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  kidney <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  prostate <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  note <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_task <span class="token punctuation">(</span></span>
<span class="line">  id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  title <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  context <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> </span>
<span class="line">  note <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> t_work_card <span class="token punctuation">(</span></span>
<span class="line">  id <span class="token keyword">INT</span> <span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> </span>
<span class="line">  emp_id <span class="token keyword">INT</span> <span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> </span>
<span class="line">  real_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> </span>
<span class="line">  department <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> </span>
<span class="line">  mobile <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> </span>
<span class="line">  position <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> </span>
<span class="line">  note <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_employee_task </span>
<span class="line"><span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> FK_Reference_4 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>emp_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> t_employee<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">RESTRICT</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">RESTRICT</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_employee_task </span>
<span class="line"><span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> FK_Reference_8 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>task_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> t_task<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">RESTRICT</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">RESTRICT</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_female_health_form </span>
<span class="line"><span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> FK_Reference_5 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>emp_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> t_employee<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">RESTRICT</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">RESTRICT</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_male_health_form </span>
<span class="line"><span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> FK_Reference_6 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>emp_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> t_employee<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">RESTRICT</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">RESTRICT</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_work_card </span>
<span class="line"><span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> FK_Reference_7 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>emp_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> t_employee<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">RESTRICT</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">RESTRICT</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_employee <span class="token punctuation">(</span>real_name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> birthday<span class="token punctuation">,</span> mobile<span class="token punctuation">,</span> email<span class="token punctuation">,</span> POSITION<span class="token punctuation">,</span> note<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;1990-05-12&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;13800000001&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;zhangsan@test.com&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;工程师&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;技术骨干&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token string">&#39;李四&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;1992-08-20&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;13800000002&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;lisi@test.com&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;测试工程师&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;细心认真&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token string">&#39;王五&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;1988-03-15&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;13800000003&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;wangwu@test.com&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;项目经理&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;负责项目管理&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_task <span class="token punctuation">(</span>id<span class="token punctuation">,</span> title<span class="token punctuation">,</span> context<span class="token punctuation">,</span> note<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;系统开发&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;完成核心模块开发&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;优先级高&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;系统测试&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;进行功能与性能测试&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;需要详细记录&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;项目管理&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;协调团队与进度&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;定期汇报&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_employee_task <span class="token punctuation">(</span>id<span class="token punctuation">,</span> emp_id<span class="token punctuation">,</span> task_id<span class="token punctuation">,</span> task_name<span class="token punctuation">,</span> note<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;系统开发&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;负责后端模块&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;系统测试&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;负责功能测试&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;项目管理&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;整体项目把控&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_female_health_form</span>
<span class="line"><span class="token punctuation">(</span>emp_id<span class="token punctuation">,</span> heart<span class="token punctuation">,</span> liver<span class="token punctuation">,</span> spleen<span class="token punctuation">,</span> lung<span class="token punctuation">,</span> kidney<span class="token punctuation">,</span> uterus<span class="token punctuation">,</span> note<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;体检情况良好&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_male_health_form</span>
<span class="line"><span class="token punctuation">(</span>emp_id<span class="token punctuation">,</span> heart<span class="token punctuation">,</span> liver<span class="token punctuation">,</span> spleen<span class="token punctuation">,</span> lung<span class="token punctuation">,</span> kidney<span class="token punctuation">,</span> prostate<span class="token punctuation">,</span> note<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;轻度脂肪肝&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;注意饮食&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正常&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;无异常&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_work_card</span>
<span class="line"><span class="token punctuation">(</span>emp_id<span class="token punctuation">,</span> real_name<span class="token punctuation">,</span> department<span class="token punctuation">,</span> mobile<span class="token punctuation">,</span> position<span class="token punctuation">,</span> note<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">VALUES</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;研发部&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;13800000001&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;工程师&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正式员工&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;李四&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;测试部&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;13800000002&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;测试工程师&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;正式员工&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;王五&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;管理部&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;13800000003&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;项目经理&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;部门负责人&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+b+`" alt="文件"></p><p>pojo / Task</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5_cascade<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Task</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> context<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> note<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//getter and setter</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;Task{&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, title=&#39;&quot;</span> <span class="token operator">+</span> title <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, context=&#39;&quot;</span> <span class="token operator">+</span> context <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, note=&#39;&quot;</span> <span class="token operator">+</span> note <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pojo / WorkCard</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5_cascade<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WorkCard</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> empId<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> realName<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> department<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> mobile<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> position<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> note<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// getter and setter</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;WorkCard{&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, empId=&quot;</span> <span class="token operator">+</span> empId <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, realName=&#39;&quot;</span> <span class="token operator">+</span> realName <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, department=&#39;&quot;</span> <span class="token operator">+</span> department <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, mobile=&#39;&quot;</span> <span class="token operator">+</span> mobile <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, position=&#39;&quot;</span> <span class="token operator">+</span> position <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, note=&#39;&quot;</span> <span class="token operator">+</span> note <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pojo / HealthForm</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5_cascade<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">HealthForm</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">Long</span> empId<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">String</span> heart<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">String</span> liver<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">String</span> spleen<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">String</span> lung<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">String</span> kidney<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">String</span> note<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// getter and setter</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;HealthForm{&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, empId=&quot;</span> <span class="token operator">+</span> empId <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, heart=&#39;&quot;</span> <span class="token operator">+</span> heart <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, liver=&#39;&quot;</span> <span class="token operator">+</span> liver <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, spleen=&#39;&quot;</span> <span class="token operator">+</span> spleen <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, lung=&#39;&quot;</span> <span class="token operator">+</span> lung <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, kidney=&#39;&quot;</span> <span class="token operator">+</span> kidney <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, note=&#39;&quot;</span> <span class="token operator">+</span> note <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pojo / MaleHealthForm</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5_cascade<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MaleHealthForm</span> <span class="token keyword">extends</span> <span class="token class-name">HealthForm</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> prostate<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getProstate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> prostate<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setProstate</span><span class="token punctuation">(</span><span class="token class-name">String</span> prostate<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prostate <span class="token operator">=</span> prostate<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;MaleHealthForm{&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, empId=&quot;</span> <span class="token operator">+</span> empId <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, heart=&#39;&quot;</span> <span class="token operator">+</span> heart <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, liver=&#39;&quot;</span> <span class="token operator">+</span> liver <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, spleen=&#39;&quot;</span> <span class="token operator">+</span> spleen <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, lung=&#39;&quot;</span> <span class="token operator">+</span> lung <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, kidney=&#39;&quot;</span> <span class="token operator">+</span> kidney <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, prostate=&#39;&quot;</span> <span class="token operator">+</span> prostate <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, note=&#39;&quot;</span> <span class="token operator">+</span> note <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pojo / FemaleHealthForm</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5_cascade<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FemaleHealthForm</span> <span class="token keyword">extends</span> <span class="token class-name">HealthForm</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> uterus<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUterus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> uterus<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUterus</span><span class="token punctuation">(</span><span class="token class-name">String</span> uterus<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>uterus <span class="token operator">=</span> uterus<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;FemaleHealthForm{&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;uterus=&#39;&quot;</span> <span class="token operator">+</span> uterus <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, empId=&quot;</span> <span class="token operator">+</span> empId <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, heart=&#39;&quot;</span> <span class="token operator">+</span> heart <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, liver=&#39;&quot;</span> <span class="token operator">+</span> liver <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, spleen=&#39;&quot;</span> <span class="token operator">+</span> spleen <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, lung=&#39;&quot;</span> <span class="token operator">+</span> lung <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, kidney=&#39;&quot;</span> <span class="token operator">+</span> kidney <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, note=&#39;&quot;</span> <span class="token operator">+</span> note <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pojo / EmployeeTask</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5_cascade<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeTask</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> empId <span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Task</span> task <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> taskName <span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> note <span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// getter and setter</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;EmployeeTask{&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, empId=&quot;</span> <span class="token operator">+</span> empId <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, task=&quot;</span> <span class="token operator">+</span> task <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, taskName=&#39;&quot;</span> <span class="token operator">+</span> taskName <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, note=&#39;&quot;</span> <span class="token operator">+</span> note <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pojo / Employee</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5_cascade<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5_cascade<span class="token punctuation">.</span>enumeration<span class="token punctuation">.</span></span><span class="token class-name">SexEnum</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> realName<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">SexEnum</span> sex <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> mobile<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> position<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> note<span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//工牌按一对一级联</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">WorkCard</span> workCard<span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//雇员任务，一对多级联</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EmployeeTask</span><span class="token punctuation">&gt;</span></span> employeeTaskList <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">HealthForm</span> healthForm<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// getter and setter</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;Employee{&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, realName=&#39;&quot;</span> <span class="token operator">+</span> realName <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, sex=&quot;</span> <span class="token operator">+</span> sex <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, birthday=&quot;</span> <span class="token operator">+</span> birthday <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, mobile=&#39;&quot;</span> <span class="token operator">+</span> mobile <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, email=&#39;&quot;</span> <span class="token operator">+</span> email <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, position=&#39;&quot;</span> <span class="token operator">+</span> position <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, note=&#39;&quot;</span> <span class="token operator">+</span> note <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, workCard=&quot;</span> <span class="token operator">+</span> workCard <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, employeeTaskList=&quot;</span> <span class="token operator">+</span> employeeTaskList <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;, healthForm=&quot;</span> <span class="token operator">+</span> healthForm <span class="token operator">+</span></span>
<span class="line">                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pojo / MaleEmployee</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5_cascade<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MaleEmployee</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">MaleHealthForm</span> maleHealthForm <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">MaleHealthForm</span> <span class="token function">getMaleHealthForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> maleHealthForm<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMaleHealthForm</span><span class="token punctuation">(</span><span class="token class-name">MaleHealthForm</span> maleHealthForm<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>maleHealthForm <span class="token operator">=</span> maleHealthForm<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pojo / FemaleEmployee</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>learn<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>chapter5_cascade<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FemaleEmployee</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">FemaleHealthForm</span> femaleHealthForm <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">FemaleHealthForm</span> <span class="token function">getFemaleHealthForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> femaleHealthForm<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFemaleHealthForm</span><span class="token punctuation">(</span><span class="token class-name">FemaleHealthForm</span> femaleHealthForm<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>femaleHealthForm <span class="token operator">=</span> femaleHealthForm<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>mapper / EmployeeTaskMapper.xml</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span>
<span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span>
<span class="line">        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.mapper.EmployeeTaskMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.EmployeeTask<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>EmployeeTaskMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>emp_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>empId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>task_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>taskName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>task<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>task_id<span class="token punctuation">&quot;</span></span></span>
<span class="line">                     <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.mapper.TaskMapper.getTaskById<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getEmployeeTaskByEmpId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>EmployeeTaskMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        select id, emp_id, task_name, task_id, note from t_employee_task</span>
<span class="line">        where emp_id = #{empId}</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>association</strong>标签表示一对一级联，select属性表示采用哪个方法来拿到结果，column属性表示SQL中的列，同时作为参数传给select属性对应的方法（如果这里有多个参数，则需要通过逗号隔开），property属性表示将结果映射到POJO哪个属性上。</p><p>mapper / EmployeeMapper.xml</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span>
<span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span>
<span class="line">        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.mapper.EmployeeMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.Employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>real_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>realName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">typeHandler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.typeHandler.SexEnumTypeHandler<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>position<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>position<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>workCard<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.mapper.WorkCardMapper.getWorkCardByEmpId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employeeTaskList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.mapper.EmployeeTaskMapper.getEmployeeTaskByEmpId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>discriminator</span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>case</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maleHealthFormMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>case</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>femaleHealthFormMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>discriminator</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.FemaleEmployee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>femaleHealthFormMapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extends</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>healthForm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.mapper.FemaleHealthFormMapper.getFemaleHealthForm<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.MaleEmployee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maleHealthFormMapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extends</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>healthForm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.mapper.MaleHealthFormMapper.getMaleHealthForm<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getEmployee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        select id, real_name as realName, sex, birthday, mobile, email, position, note from t_employee where id = #{id}</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>collection</strong>标签表示一对多级联，select属性表示采用哪个方法来拿到结果，column属性表示SQL中的列，同时作为参数传给select属性对应的方法（如果这里有多个参数，则需要通过逗号隔开），property属性表示将结果映射到POJO哪个属性上。</p><p><strong>discriminator</strong>标签表示<strong>鉴别器</strong>，column属性表示采用SQL中的哪一列来鉴别，而它的子元素case，则用于进行区分，类似于Java的switch...case..语句。而resultMap属性表示采用哪个ResultMap去映射，比如sex=1，则使用maleHealthFormMapper进行映射。</p><p>resultMap的extends属性的作用是：继承另一个 resultMap 的配置。</p><p>输出：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,034 org.apache.ibatis.logging.LogFactory: Logging initialized using <span class="token string">&#39;class org.apache.ibatis.logging.slf4j.Slf4jImpl&#39;</span> adapter.</span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,120 org.apache.ibatis.datasource.pooled.PooledDataSource: PooledDataSource forcefully closed/removed all connections.</span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,121 org.apache.ibatis.datasource.pooled.PooledDataSource: PooledDataSource forcefully closed/removed all connections.</span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,121 org.apache.ibatis.datasource.pooled.PooledDataSource: PooledDataSource forcefully closed/removed all connections.</span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,121 org.apache.ibatis.datasource.pooled.PooledDataSource: PooledDataSource forcefully closed/removed all connections.</span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,249 org.apache.ibatis.transaction.jdbc.JdbcTransaction: Opening JDBC Connection</span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,751 org.apache.ibatis.datasource.pooled.PooledDataSource: Created connection <span class="token number">1389509050</span>.</span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,751 org.apache.ibatis.transaction.jdbc.JdbcTransaction: Setting autocommit to <span class="token boolean">false</span> on JDBC Connection <span class="token punctuation">[</span>com.mysql.cj.jdbc.ConnectionImpl@52d239ba<span class="token punctuation">]</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,752 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, real_name as realName, sex, birthday, mobile, email, position, note from t_employee where <span class="token function">id</span> <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,773 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,787 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, emp_id as empId, heart, liver, spleen, lung, kidney, prostate, note from t_male_health_form where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,787 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,790 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,792 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: SELECT id, emp_id as empId, real_name as realName, department, mobile, position, note FROM t_work_card where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,792 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,794 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,795 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, emp_id, task_name, task_id, note from t_employee_task where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,795 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,796 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, title, context, note from t_task where <span class="token function">id</span> <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,796 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,797 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,797 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,797 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line"> INFO <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,799 com.learn.ssm.chapter5_cascade.main.Main: Employee<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">realName</span><span class="token operator">=</span><span class="token string">&#39;张三&#39;</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>MALE, <span class="token assign-left variable">birthday</span><span class="token operator">=</span>Sat May <span class="token number">12</span> 00:00:00 CDT <span class="token number">1990</span>, <span class="token assign-left variable">mobile</span><span class="token operator">=</span><span class="token string">&#39;13800000001&#39;</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span><span class="token string">&#39;zhangsan@test.com&#39;</span>, <span class="token assign-left variable">position</span><span class="token operator">=</span><span class="token string">&#39;工程师&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;技术骨干&#39;</span>, <span class="token assign-left variable">workCard</span><span class="token operator">=</span>WorkCard<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">realName</span><span class="token operator">=</span><span class="token string">&#39;张三&#39;</span>, <span class="token assign-left variable">department</span><span class="token operator">=</span><span class="token string">&#39;研发部&#39;</span>, <span class="token assign-left variable">mobile</span><span class="token operator">=</span><span class="token string">&#39;13800000001&#39;</span>, <span class="token assign-left variable">position</span><span class="token operator">=</span><span class="token string">&#39;工程师&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;正式员工&#39;</span><span class="token punctuation">}</span>, <span class="token assign-left variable">employeeTaskList</span><span class="token operator">=</span><span class="token punctuation">[</span>EmployeeTask<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">task</span><span class="token operator">=</span>Task<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">title</span><span class="token operator">=</span><span class="token string">&#39;系统开发&#39;</span>, <span class="token assign-left variable">context</span><span class="token operator">=</span><span class="token string">&#39;完成核心模块开发&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;优先级高&#39;</span><span class="token punctuation">}</span>, <span class="token assign-left variable">taskName</span><span class="token operator">=</span><span class="token string">&#39;系统开发&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;负责后端模块&#39;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>, <span class="token assign-left variable">healthForm</span><span class="token operator">=</span>MaleHealthForm<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">heart</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">liver</span><span class="token operator">=</span><span class="token string">&#39;轻度脂肪肝&#39;</span>, <span class="token assign-left variable">spleen</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">lung</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">kidney</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">prostate</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;注意饮食&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,799 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, real_name as realName, sex, birthday, mobile, email, position, note from t_employee where <span class="token function">id</span> <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,799 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">2</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,800 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, emp_id as empId, heart, liver, spleen, lung, kidney, uterus, note from t_female_health_form where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,800 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">2</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,802 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,802 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: SELECT id, emp_id as empId, real_name as realName, department, mobile, position, note FROM t_work_card where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,803 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">2</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,804 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,804 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, emp_id, task_name, task_id, note from t_employee_task where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,804 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">2</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,805 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, title, context, note from t_task where <span class="token function">id</span> <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,805 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">2</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,805 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,806 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,806 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line"> INFO <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,806 com.learn.ssm.chapter5_cascade.main.Main: Employee<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">realName</span><span class="token operator">=</span><span class="token string">&#39;李四&#39;</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>FEMALE, <span class="token assign-left variable">birthday</span><span class="token operator">=</span>Thu Aug <span class="token number">20</span> 00:00:00 CST <span class="token number">1992</span>, <span class="token assign-left variable">mobile</span><span class="token operator">=</span><span class="token string">&#39;13800000002&#39;</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span><span class="token string">&#39;lisi@test.com&#39;</span>, <span class="token assign-left variable">position</span><span class="token operator">=</span><span class="token string">&#39;测试工程师&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;细心认真&#39;</span>, <span class="token assign-left variable">workCard</span><span class="token operator">=</span>WorkCard<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">realName</span><span class="token operator">=</span><span class="token string">&#39;李四&#39;</span>, <span class="token assign-left variable">department</span><span class="token operator">=</span><span class="token string">&#39;测试部&#39;</span>, <span class="token assign-left variable">mobile</span><span class="token operator">=</span><span class="token string">&#39;13800000002&#39;</span>, <span class="token assign-left variable">position</span><span class="token operator">=</span><span class="token string">&#39;测试工程师&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;正式员工&#39;</span><span class="token punctuation">}</span>, <span class="token assign-left variable">employeeTaskList</span><span class="token operator">=</span><span class="token punctuation">[</span>EmployeeTask<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">task</span><span class="token operator">=</span>Task<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">title</span><span class="token operator">=</span><span class="token string">&#39;系统测试&#39;</span>, <span class="token assign-left variable">context</span><span class="token operator">=</span><span class="token string">&#39;进行功能与性能测试&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;需要详细记录&#39;</span><span class="token punctuation">}</span>, <span class="token assign-left variable">taskName</span><span class="token operator">=</span><span class="token string">&#39;系统测试&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;负责功能测试&#39;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>, <span class="token assign-left variable">healthForm</span><span class="token operator">=</span>FemaleHealthForm<span class="token punctuation">{</span>uterus<span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">heart</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">liver</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">spleen</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">lung</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">kidney</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;体检情况良好&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,806 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, real_name as realName, sex, birthday, mobile, email, position, note from t_employee where <span class="token function">id</span> <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,806 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">3</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,807 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, emp_id as empId, heart, liver, spleen, lung, kidney, prostate, note from t_male_health_form where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,807 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">3</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,808 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,808 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: SELECT id, emp_id as empId, real_name as realName, department, mobile, position, note FROM t_work_card where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,808 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">3</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,809 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,809 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, emp_id, task_name, task_id, note from t_employee_task where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,809 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">3</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,810 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, title, context, note from t_task where <span class="token function">id</span> <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,810 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">3</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,811 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,811 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,811 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line"> INFO <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,811 com.learn.ssm.chapter5_cascade.main.Main: Employee<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">realName</span><span class="token operator">=</span><span class="token string">&#39;王五&#39;</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>MALE, <span class="token assign-left variable">birthday</span><span class="token operator">=</span>Tue Mar <span class="token number">15</span> 00:00:00 CST <span class="token number">1988</span>, <span class="token assign-left variable">mobile</span><span class="token operator">=</span><span class="token string">&#39;13800000003&#39;</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span><span class="token string">&#39;wangwu@test.com&#39;</span>, <span class="token assign-left variable">position</span><span class="token operator">=</span><span class="token string">&#39;项目经理&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;负责项目管理&#39;</span>, <span class="token assign-left variable">workCard</span><span class="token operator">=</span>WorkCard<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">realName</span><span class="token operator">=</span><span class="token string">&#39;王五&#39;</span>, <span class="token assign-left variable">department</span><span class="token operator">=</span><span class="token string">&#39;管理部&#39;</span>, <span class="token assign-left variable">mobile</span><span class="token operator">=</span><span class="token string">&#39;13800000003&#39;</span>, <span class="token assign-left variable">position</span><span class="token operator">=</span><span class="token string">&#39;项目经理&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;部门负责人&#39;</span><span class="token punctuation">}</span>, <span class="token assign-left variable">employeeTaskList</span><span class="token operator">=</span><span class="token punctuation">[</span>EmployeeTask<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">task</span><span class="token operator">=</span>Task<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">title</span><span class="token operator">=</span><span class="token string">&#39;项目管理&#39;</span>, <span class="token assign-left variable">context</span><span class="token operator">=</span><span class="token string">&#39;协调团队与进度&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;定期汇报&#39;</span><span class="token punctuation">}</span>, <span class="token assign-left variable">taskName</span><span class="token operator">=</span><span class="token string">&#39;项目管理&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;整体项目把控&#39;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>, <span class="token assign-left variable">healthForm</span><span class="token operator">=</span>MaleHealthForm<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">heart</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">liver</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">spleen</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">lung</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">kidney</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">prostate</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;无异常&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,811 org.apache.ibatis.transaction.jdbc.JdbcTransaction: Resetting autocommit to <span class="token boolean">true</span> on JDBC Connection <span class="token punctuation">[</span>com.mysql.cj.jdbc.ConnectionImpl@52d239ba<span class="token punctuation">]</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,811 org.apache.ibatis.transaction.jdbc.JdbcTransaction: Closing JDBC Connection <span class="token punctuation">[</span>com.mysql.cj.jdbc.ConnectionImpl@52d239ba<span class="token punctuation">]</span></span>
<span class="line">DEBUG <span class="token number">2025</span>-12-31 <span class="token number">14</span>:10:38,811 org.apache.ibatis.datasource.pooled.PooledDataSource: Returned connection <span class="token number">1389509050</span> to pool.</span>
<span class="line"></span>
<span class="line">Process finished with <span class="token builtin class-name">exit</span> code <span class="token number">0</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>查询时流程：</strong></p><ol><li>执行 <code>getEmployee</code> 查询，使用基础的 <code>employee</code> resultMap</li><li>根据 <code>sex</code> 字段的值（鉴别器 column）决定使用哪个<strong>子 resultMap</strong></li><li>如果是女性（sex=0），使用 <code>femaleHealthFormMapper</code><ul><li>继承所有 <code>employee</code> 的基础映射</li><li>额外添加 <code>healthForm</code> 关联（女性健康表）</li></ul></li><li>如果是男性（sex=1），使用 <code>maleHealthFormMapper</code><ul><li>继承所有 <code>employee</code> 的基础映射</li><li>额外添加 <code>healthForm</code> 关联（男性健康表）</li></ul></li></ol><p><strong>用代码模拟这个过程：</strong></p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// 模拟 MyBatis 的内部处理逻辑</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">processResultSet</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 1. 创建基础对象（根据type=&quot;Employee&quot;）</span></span>
<span class="line">    <span class="token class-name">Employee</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 2. 应用employee resultMap的所有基础映射</span></span>
<span class="line">    emp<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    emp<span class="token punctuation">.</span><span class="token function">setRealName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;real_name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    emp<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span>sexTypeHandler<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span>rs<span class="token punctuation">,</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 使用TypeHandler转换</span></span>
<span class="line">    <span class="token comment">// ... 映射其他基础字段</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 3. 应用关联映射（workCard等）</span></span>
<span class="line">    emp<span class="token punctuation">.</span><span class="token function">setWorkCard</span><span class="token punctuation">(</span>workCardMapper<span class="token punctuation">.</span><span class="token function">getWorkCard</span><span class="token punctuation">(</span>emp<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 4. 鉴别器判断</span></span>
<span class="line">    <span class="token keyword">long</span> sexValue <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>sexValue <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 5. 转换为子类</span></span>
<span class="line">        <span class="token class-name">MaleEmployee</span> maleEmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MaleEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>emp<span class="token punctuation">,</span> maleEmp<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 复制所有已映射的属性</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// 6. 应用maleHealthFormMapper的额外配置</span></span>
<span class="line">        maleEmp<span class="token punctuation">.</span><span class="token function">setHealthForm</span><span class="token punctuation">(</span>maleHealthFormMapper<span class="token punctuation">.</span><span class="token function">getMaleHealthForm</span><span class="token punctuation">(</span>maleEmp<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token keyword">return</span> maleEmp<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sexValue <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 同理，处理女性员工</span></span>
<span class="line">        <span class="token class-name">FemaleEmployee</span> femaleEmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FemaleEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>emp<span class="token punctuation">,</span> femaleEmp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        femaleEmp<span class="token punctuation">.</span><span class="token function">setHealthForm</span><span class="token punctuation">(</span>femaleHealthFormMapper<span class="token punctuation">.</span><span class="token function">getFemaleHealthForm</span><span class="token punctuation">(</span>femaleEmp<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> femaleEmp<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> emp<span class="token punctuation">;</span>  <span class="token comment">// 如果没有匹配的case，返回基础Employee</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>查询开始时使用第一个resultMap（employee），但在处理过程中会根据sex值动态应用后两个resultMap之一，并且后两个resultMap继承了第一个的所有配置，同时添加了特有的健康表关联。</strong></p><p>这是一个<strong>继承 + 多态</strong>的设计模式，不是简单的&quot;切换替换&quot;。</p><h3 id="_2-dto" tabindex="-1"><a class="header-anchor" href="#_2-dto"><span>②.DTO</span></a></h3><p>级联是一种设计理念，实际工程开发中，若采用级联，则<strong>SQL混乱、性能堪忧、N+1冗余</strong>，所以企业级开发常用**DTO（数据传输对象）**来代替级联。</p><blockquote><p>DTO 方案 = 可控 SQL + 可预测性能 + 更贴近真实业务（灵活多变）</p><p>DTO的思路是：接口要什么数据，就一次性查出来， 用一个 DTO 装好返回。</p></blockquote><p>员工详情 DTO（示例）</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeDetailDTO</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// ===== 员工基本信息 =====</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> empId<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> realName<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Integer</span> sex<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> mobile<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> position<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// ===== 工作证 =====</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> department<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// ===== 体检信息（统一结构）=====</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> heart<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> liver<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> spleen<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> lung<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> kidney<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> special<span class="token punctuation">;</span>   <span class="token comment">// 男：prostate / 女：uterus</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> healthNote<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// ===== 任务 =====</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TaskDTO</span><span class="token punctuation">&gt;</span></span> tasks<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>子 DTO（任务）</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskDTO</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> taskId<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> taskName<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> context<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>DTO 是“为接口量身定制的结构”</strong>。</p><p>Mapper：<strong>多次 SQL + 手动组装</strong></p><p>EmployeeMapper.xml</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getEmployeeBase<span class="token punctuation">&quot;</span></span></span>
<span class="line">        <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.dto.EmployeeDetailDTO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    SELECT</span>
<span class="line">        e.id        AS empId,</span>
<span class="line">        e.real_name AS realName,</span>
<span class="line">        e.sex,</span>
<span class="line">        e.birthday,</span>
<span class="line">        e.mobile,</span>
<span class="line">        e.email,</span>
<span class="line">        e.position,</span>
<span class="line">        wc.department</span>
<span class="line">    FROM t_employee e</span>
<span class="line">    LEFT JOIN t_work_card wc ON wc.emp_id = e.id</span>
<span class="line">    WHERE e.id = #{id}</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>HealthMapper.xml（统一）</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getMaleHealth<span class="token punctuation">&quot;</span></span></span>
<span class="line">        <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    SELECT heart, liver, spleen, lung, kidney, prostate AS special, note AS healthNote</span>
<span class="line">    FROM t_male_health_form</span>
<span class="line">    WHERE emp_id = #{id}</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getFemaleHealth<span class="token punctuation">&quot;</span></span></span>
<span class="line">        <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    SELECT heart, liver, spleen, lung, kidney, uterus AS special, note AS healthNote</span>
<span class="line">    FROM t_female_health_form</span>
<span class="line">    WHERE emp_id = #{id}</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>TaskMapper.xml</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getTasksByEmpId<span class="token punctuation">&quot;</span></span></span>
<span class="line">        <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.dto.TaskDTO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    SELECT</span>
<span class="line">        t.id        AS taskId,</span>
<span class="line">        et.task_name AS taskName,</span>
<span class="line">        t.context</span>
<span class="line">    FROM t_employee_task et</span>
<span class="line">    JOIN t_task t ON t.id = et.task_id</span>
<span class="line">    WHERE et.emp_id = #{empId}</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Service 层（真正的“组装者”）</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">EmployeeDetailDTO</span> dto <span class="token operator">=</span> employeeMapper<span class="token punctuation">.</span><span class="token function">getEmployeeBase</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>dto<span class="token punctuation">.</span><span class="token function">getSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> health <span class="token operator">=</span> healthMapper<span class="token punctuation">.</span><span class="token function">getMaleHealth</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>health<span class="token punctuation">,</span> dto<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> health <span class="token operator">=</span> healthMapper<span class="token punctuation">.</span><span class="token function">getFemaleHealth</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>health<span class="token punctuation">,</span> dto<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TaskDTO</span><span class="token punctuation">&gt;</span></span> tasks <span class="token operator">=</span> taskMapper<span class="token punctuation">.</span><span class="token function">getTasksByEmpId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">dto<span class="token punctuation">.</span><span class="token function">setTasks</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>DTO 的作用是：</p><ul><li>不暴露表结构</li><li>不被实体关系绑架</li><li>前端想要什么就给什么</li></ul><h3 id="_3-n-1问题" tabindex="-1"><a class="header-anchor" href="#_3-n-1问题"><span>③.N+1问题</span></a></h3><p>这是 <strong>ORM / MyBatis / JPA / Hibernate</strong> 里一个<strong>必须理解、而且非常常见的性能问题</strong>。</p><blockquote><p><strong>N+1 问题 = 查 1 次主表 + 查 N 次子表 本来 1 次能解决的事，却执行了 N+1 次 SQL</strong></p></blockquote><p>比如查询所有员工（employee）及其各自的任务（task）：</p><ol><li>SELECT * FROM t_employee;假设查出了 <strong>N 个员工</strong>。</li><li>后续N条SQL： SELECT * FROM t_employee_task WHERE emp_id = 1; SELECT * FROM t_employee_task WHERE emp_id = 2; SELECT * FROM t_employee_task WHERE emp_id = 3; ...</li></ol><p>总共执行了1 + N条SQL，被称为N + 1问题。</p><p>上述过程的伪代码：</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getEmployeeList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employeeMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    SELECT id, real_name, sex FROM t_employee</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employeeMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>taskList<span class="token punctuation">&quot;</span></span></span>
<span class="line">                <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span></span>
<span class="line">                <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getTaskByEmpId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1️⃣ 查员工（1 条） 2️⃣ 遍历员工 3️⃣ 每个员工触发 getTaskByEmpId（N 条）</p><p>如何避免N+1问题：</p><p>方案一：<strong>JOIN + collection result</strong> 代替 <strong>collection select</strong></p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getEmployeeList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employeeMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    SELECT e.id, e.real_name, t.id AS task_id, t.task_name</span>
<span class="line">    FROM t_employee e</span>
<span class="line">    LEFT JOIN t_employee_task t ON e.id = t.emp_id;</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employeeMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>taskList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Task<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>task_id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>taskName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>task_name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>方案二：IN查询</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_employee_task <span class="token keyword">WHERE</span> emp_id <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>组合</th><th>风险</th></tr></thead><tbody><tr><td>collection + select</td><td>N+1</td></tr><tr><td>association + list</td><td>N+1</td></tr><tr><td>lazy + for 循环</td><td>N+1</td></tr><tr><td>toString / JSON</td><td><strong>瞬间 N+1</strong></td></tr></tbody></table><p>虽然有<strong>延迟加载</strong>这种设计，但是它并不能解决N+1问题。</p><h3 id="_4-延迟加载-懒加载" tabindex="-1"><a class="header-anchor" href="#_4-延迟加载-懒加载"><span>④.延迟加载（懒加载）</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazyLoadingEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aggressiveLazyLoading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">Employee</span> employee <span class="token operator">=</span> employeeMapper<span class="token punctuation">.</span><span class="token function">getEmployee</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回 MaleEmployee 对象</span></span>
<span class="line">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>employee <span class="token keyword">instanceof</span> <span class="token class-name">MaleEmployee</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span></span>
<span class="line">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>lazyLoadingEnabled如果没有置为true，那么执行employeeMapper.getEmployee(1L)时SQL就查询了Employee + Task + WorkCard + HealthForm。</p><p>lazyLoadingEnabled置为true后，执行employeeMapper.getEmployee(1L)时SQL只查询了Employee + HealthForm（discriminator），而association以及collection对应SQL没有被调用，我在employee.toString()中访问了employeeTaskList跟workCard，所以这里才去执行对应的select SQL。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">EBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,520 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, real_name as realName, sex, birthday, mobile, email, position, note from t_employee where <span class="token function">id</span> <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,543 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,574 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, emp_id as empId, heart, liver, spleen, lung, kidney, prostate, note from t_male_health_form where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,575 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,576 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,578 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line"> INFO <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,579 com.learn.ssm.chapter5_cascade.main.Main: <span class="token boolean">true</span></span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,579 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: SELECT id, emp_id as empId, real_name as realName, department, mobile, position, note FROM t_work_card where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,580 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,581 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,583 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, emp_id, task_name, task_id, note from t_employee_task where emp_id <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,583 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,585 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,587 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">select</span> id, title, context, note from t_task where <span class="token function">id</span> <span class="token operator">=</span> ? </span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,587 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">==</span><span class="token operator">&gt;</span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span></span>
<span class="line">DEBUG <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,589 org.apache.ibatis.logging.jdbc.BaseJdbcLogger: <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span></span>
<span class="line"> INFO <span class="token number">2026</span>-01-04 <span class="token number">15</span>:00:31,589 com.learn.ssm.chapter5_cascade.main.Main: Employee<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">realName</span><span class="token operator">=</span><span class="token string">&#39;张三&#39;</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>MALE, <span class="token assign-left variable">birthday</span><span class="token operator">=</span>Sat May <span class="token number">12</span> 00:00:00 CDT <span class="token number">1990</span>, <span class="token assign-left variable">mobile</span><span class="token operator">=</span><span class="token string">&#39;13800000001&#39;</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span><span class="token string">&#39;zhangsan@test.com&#39;</span>, <span class="token assign-left variable">position</span><span class="token operator">=</span><span class="token string">&#39;工程师&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;技术骨干&#39;</span>, <span class="token assign-left variable">workCard</span><span class="token operator">=</span>WorkCard<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">realName</span><span class="token operator">=</span><span class="token string">&#39;张三&#39;</span>, <span class="token assign-left variable">department</span><span class="token operator">=</span><span class="token string">&#39;研发部&#39;</span>, <span class="token assign-left variable">mobile</span><span class="token operator">=</span><span class="token string">&#39;13800000001&#39;</span>, <span class="token assign-left variable">position</span><span class="token operator">=</span><span class="token string">&#39;工程师&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;正式员工&#39;</span><span class="token punctuation">}</span>, <span class="token assign-left variable">employeeTaskList</span><span class="token operator">=</span><span class="token punctuation">[</span>EmployeeTask<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">task</span><span class="token operator">=</span>Task<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">title</span><span class="token operator">=</span><span class="token string">&#39;系统开发&#39;</span>, <span class="token assign-left variable">context</span><span class="token operator">=</span><span class="token string">&#39;完成核心模块开发&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;优先级高&#39;</span><span class="token punctuation">}</span>, <span class="token assign-left variable">taskName</span><span class="token operator">=</span><span class="token string">&#39;系统开发&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;负责后端模块&#39;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>, <span class="token assign-left variable">healthForm</span><span class="token operator">=</span>MaleHealthForm<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">empId</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">heart</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">liver</span><span class="token operator">=</span><span class="token string">&#39;轻度脂肪肝&#39;</span>, <span class="token assign-left variable">spleen</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">lung</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">kidney</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">prostate</span><span class="token operator">=</span><span class="token string">&#39;正常&#39;</span>, <span class="token assign-left variable">note</span><span class="token operator">=</span><span class="token string">&#39;注意饮食&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里日志中可以看出logger.info(employee instanceof MaleEmployee);//true之前查了Employee + HealthForm，之后查了Task + WorkCard。</p><p>而<strong>aggressive</strong>LazyLoading（<strong>激进式</strong>懒加载），被设为true时，表示“一旦访问到懒加载属性中的某一个，则加载所有懒加载属性”，被置为false时，表示“哪个懒加载属性被访问了才去加载它”。</p><p>lazyLoadingEnabled的含义是：</p><table><thead><tr><th>选项</th><th>作用</th></tr></thead><tbody><tr><td><code>true</code></td><td>允许使用延迟加载</td></tr><tr><td><code>false</code></td><td>association / collection 立刻加载</td></tr></tbody></table><p>它只是“开关”，不决定加载策略</p><p>aggressiveLazyLoading 是“策略开关”</p><table><thead><tr><th>值</th><th>行为</th></tr></thead><tbody><tr><td><code>true</code>（默认，老版本）</td><td><strong>只要访问任意一个懒属性 → 全部懒属性一起加载</strong></td></tr><tr><td><code>false</code>（推荐）</td><td><strong>访问哪个属性 → 只加载哪个</strong></td></tr></tbody></table><h3 id="_5-join实现级联" tabindex="-1"><a class="header-anchor" href="#_5-join实现级联"><span>⑤.JOIN实现级联</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.Employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>real_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>realName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">typeHandler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.typeHandler.SexEnumTypeHandler<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>position<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>position<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>workCard<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.WorkCard<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wc_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>empId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wc_real_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>realName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wc_department<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>department<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wc_mobile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wc_position<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>position<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wc_note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employeeTaskList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.EmployeeTask<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>et_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>empId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>et_task_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>taskName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>et_note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>task<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.Task<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>et_task_id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>t_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>t_title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>t_context<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>context<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>t_note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>discriminator</span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>case</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maleHealthFormMapper2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>case</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>femaleHealthFormMapper2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>discriminator</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.MaleEmployee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maleHealthFormMapper2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extends</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>healthForm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.MaleHealthForm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_emp_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>empId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_heart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>heart<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_liver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>liver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_spleen<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>spleen<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_lung<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lung<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_kidney<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>kidney<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_prostate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prostate<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.FemaleEmployee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>femaleHealthFormMapper2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extends</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>healthForm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_cascade.pojo.FemaleHealthForm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_emp_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>empId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_heart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>heart<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_liver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>liver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_spleen<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>spleen<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_lung<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lung<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_kidney<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>kidney<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_uterus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uterus<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h_note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getEmployee2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    select emp.id, emp.real_name, emp.sex, emp.birthday, emp.mobile, emp.email, emp.position, emp.note,</span>
<span class="line">           et.id as et_id, et.task_id as et_task_id, et.task_name as et_task_name, et.note as et_note,</span>
<span class="line">            if (emp.sex = 1, mhf.id, fhf.id) as h_id,</span>
<span class="line">            if (emp.sex = 1, mhf.emp_id, fhf.emp_id) as h_emp_id,</span>
<span class="line">            if (emp.sex = 1, mhf.heart, fhf.heart) as h_heart,</span>
<span class="line">            if (emp.sex = 1, mhf.liver, fhf.liver) as h_liver,</span>
<span class="line">            if (emp.sex = 1, mhf.spleen, fhf.spleen) as h_spleen,</span>
<span class="line">            if (emp.sex = 1, mhf.lung, fhf.lung) as h_lung,</span>
<span class="line">            if (emp.sex = 1, mhf.kidney, fhf.kidney) as h_kidney,</span>
<span class="line">            if (emp.sex = 1, mhf.note, fhf.note) as h_note,</span>
<span class="line">            mhf.prostate as h_prostate, fhf.uterus as h_uterus,</span>
<span class="line">            wc.id as wc_id, wc.real_name as wc_real_name, wc.department as wc_department,</span>
<span class="line">            wc.mobile as wc_mobile, wc.position as wc_position, wc.note as wc_note,</span>
<span class="line">            t.id as t_id, t.title as t_title, t.context as t_context, t.note as t_note</span>
<span class="line">    from t_employee emp</span>
<span class="line">    left join t_employee_task et on emp.id = et.emp_id</span>
<span class="line">    left join t_female_health_form fhf on emp.id = fhf.emp_id</span>
<span class="line">    left join t_male_health_form mhf on emp.id = mhf.emp_id</span>
<span class="line">    left join t_work_card wc on emp.id = wc.emp_id</span>
<span class="line">    left join t_task t on et.task_id = t.id</span>
<span class="line">    where emp.id = #{id}</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这能解决N+1问题，但是SQL复杂不利用维护，且一次性取出全部数据（无论是否需要）占用大量内存。</p><p>这种级联适应于关联较少的场景。</p><h3 id="_6-多对多级联" tabindex="-1"><a class="header-anchor" href="#_6-多对多级联"><span>⑥.多对多级联</span></a></h3><p><img src="`+q+`" alt="user_role"></p><p>一个用户可以有多个角色（后端开发工程师、架构师、副部长），一个角色（后端开发工程师）可以分配给多个用户，所以用户跟角色是多对多的级联。</p><p>由于多对多级联很复杂，所以通常将其拆分成两个一对多的级联。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> roleList<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// getter, setter and toString</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Role</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> roleName<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList<span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// getter, setter and toString</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span>
<span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span>
<span class="line">        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_user_role.mapper.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_user_role.pojo.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fetchType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span></span>
<span class="line">                    <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_user_role.mapper.RoleMapper.findRolesByUserId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        select id, username from t_user where id = #{id}</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findUsersByRoleId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        select u.id, u.username from t_user u, t_user_role ur</span>
<span class="line">        where u.id = ur.user_id and ur.role_id = #{roleId}</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span>
<span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span>
<span class="line">        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_user_role.mapper.RoleMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_user_role.pojo.Role<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fetchType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span></span>
<span class="line">                    <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_user_role.mapper.UserMapper.findUsersByRoleId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getRole<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        select id, role_name from t_role where id = #{id}</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findRolesByUserId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        select r.id, r.role_name from t_role r, t_user_role ur</span>
<span class="line">        where r.id = ur.role_id and ur.user_id = #{userId}</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Main</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            sqlSession <span class="token operator">=</span> <span class="token class-name">SqlSessionFactoryUtils</span><span class="token punctuation">.</span><span class="token function">openSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">RoleMapper</span> roleMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">RoleMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">Role</span> role <span class="token operator">=</span> roleMapper<span class="token punctuation">.</span><span class="token function">getRole</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//            logger.info(role.toString());函数无限互相调用，造成栈溢出(StackOverflow)</span></span>
<span class="line">            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> role<span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//            logger.info(userList);//函数无限互相调用，造成栈溢出(StackOverflow)</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//提交事务</span></span>
<span class="line">            sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span><span class="token punctuation">(</span>sqlSession <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                sqlSession<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>sqlSession <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不过值得注意的是，如果不开启懒加载，会导致函数无限互相调用，造成<strong>栈溢出</strong>(StackOverflow)。</p><h2 id="_7-缓存" tabindex="-1"><a class="header-anchor" href="#_7-缓存"><span>7.缓存</span></a></h2><p>MyBatis 提供了 <strong>两级缓存</strong>：</p><table><thead><tr><th>级别</th><th>作用范围</th><th>默认</th><th>是否可关闭</th></tr></thead><tbody><tr><td>一级缓存（Local Cache）</td><td><code>SqlSession</code></td><td>✅ 开启</td><td>❌（只能调整范围）</td></tr><tr><td>二级缓存（Mapper Cache）</td><td>Mapper 命名空间</td><td>❌ 关闭</td><td>✅</td></tr></tbody></table><h3 id="_1-一级缓存" tabindex="-1"><a class="header-anchor" href="#_1-一级缓存"><span>①.一级缓存</span></a></h3><ul><li><strong>默认开启</strong></li><li>生命周期 = <code>SqlSession</code></li><li>同一个 <code>SqlSession</code> 内，相同 SQL + 相同参数 → 只查一次 DB</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">SqlSession</span> session <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">User</span> u1 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">User</span> u2 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第二次直接走缓存，不发 SQL</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>u1 <span class="token operator">==</span> u2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="缓存的key" tabindex="-1"><a class="header-anchor" href="#缓存的key"><span>缓存的key</span></a></h4><p>MyBatis 内部使用：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">MappedStatement + SQL + 参数 + RowBounds + 环境</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>所以：</p><ul><li>SQL 文本变了 ❌</li><li>参数变了 ❌</li><li>RowBounds 不同 ❌</li></ul><p>都会导致缓存失效。</p><h4 id="缓存失效" tabindex="-1"><a class="header-anchor" href="#缓存失效"><span>缓存失效</span></a></h4><p><strong>以下操作会清空一级缓存：</strong></p><ol><li><code>session.commit()</code></li><li><code>session.rollback()</code></li><li><code>session.close()</code></li><li>执行 <strong>insert / update / delete</strong></li><li>手动清空：<code>session.clearCache();</code></li></ol><h4 id="实际项目" tabindex="-1"><a class="header-anchor" href="#实际项目"><span>实际项目</span></a></h4><p>在 <strong>Spring + MyBatis</strong> 中：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token annotation punctuation">@Transactional</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    mapper<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    mapper<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 仍然走一级缓存</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因为 Spring 的事务绑定了同一个 <code>SqlSession</code></p><h3 id="_2-二级缓存" tabindex="-1"><a class="header-anchor" href="#_2-二级缓存"><span>②.二级缓存</span></a></h3><ul><li><strong>跨 SqlSession</strong></li><li>作用范围：<strong>Mapper 命名空间</strong></li><li>默认关闭，需要显式开启</li></ul><h4 id="如何开启" tabindex="-1"><a class="header-anchor" href="#如何开启"><span>如何开启</span></a></h4><p>① 全局开启（mybatis-config.xml）</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cacheEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② Mapper 中开启</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>两步缺一不可。</p><h4 id="使用示例" tabindex="-1"><a class="header-anchor" href="#使用示例"><span>使用示例</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">User</span> u1 <span class="token operator">=</span> mapper1<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">session1<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">User</span> u2 <span class="token operator">=</span> mapper2<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 走二级缓存</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="前提条件" tabindex="-1"><a class="header-anchor" href="#前提条件"><span>前提条件</span></a></h4><ul><li>实现：<code>org.apache.ibatis.cache.Cache</code></li><li>默认实现：<code>PerpetualCache + LRU</code></li><li><strong>数据是序列化存储的</strong></li></ul><p><strong>返回对象必须实现 <code>Serializable</code></strong></p><h4 id="缓存失效-1" tabindex="-1"><a class="header-anchor" href="#缓存失效-1"><span>缓存失效</span></a></h4><p><strong>任意一次写操作都会清空该 Mapper 的缓存：</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">insert / update / delete</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>甚至：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">update t_user set name = &#39;x&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>会清空 <strong>整个 UserMapper 的二级缓存</strong>。</p><h4 id="精细控制" tabindex="-1"><a class="header-anchor" href="#精细控制"><span>精细控制</span></a></h4><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useCache</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">flushCache</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>属性</th><th>作用</th></tr></thead><tbody><tr><td><code>useCache</code></td><td>是否使用二级缓存</td></tr><tr><td><code>flushCache</code></td><td>是否清空缓存</td></tr></tbody></table><h3 id="_3-最佳实践" tabindex="-1"><a class="header-anchor" href="#_3-最佳实践"><span>③.最佳实践</span></a></h3><p>一级缓存 <strong>默认使用，不操心</strong> 二级缓存 <strong>慎用</strong>，只适合：</p><ul><li>读多写少</li><li>数据稳定</li><li>单表 Mapper</li></ul><p>而核心业务，采用Redis / Caffeine 等业务缓存更可靠</p><blockquote><p>一级缓存是“会话级别的免费性能优化”，</p><p>二级缓存是“Mapper 级别的可选能力，但风险较高”。</p></blockquote><h2 id="_8-存储过程" tabindex="-1"><a class="header-anchor" href="#_8-存储过程"><span>8.存储过程</span></a></h2><p><strong>存储过程</strong>：预先编译、存放在数据库中的一段 SQL 逻辑，可以接收参数、返回结果集或输出参数。</p><p>MyBatis 调用存储过程时，必须注意三件事：</p><ol><li><strong>statementType=&quot;CALLABLE&quot;</strong></li><li><strong>参数必须显式声明 mode（IN / OUT / INOUT）</strong></li><li><strong>返回结果要么是 resultType / resultMap，要么是 OUT 参数</strong></li></ol><h3 id="_1-in参数" tabindex="-1"><a class="header-anchor" href="#_1-in参数"><span>①.IN参数</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> delete_user<span class="token punctuation">(</span><span class="token operator">IN</span> uid <span class="token keyword">BIGINT</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> t_user <span class="token keyword">WHERE</span> id <span class="token operator">=</span> uid<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">void</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">statementType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CALLABLE<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    { call delete_user( #{id} ) }</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line">userMapper<span class="token punctuation">.</span><span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token number">2L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-out参数" tabindex="-1"><a class="header-anchor" href="#_2-out参数"><span>②.OUT参数</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> get_user_count<span class="token punctuation">(</span><span class="token keyword">OUT</span> total <span class="token keyword">INT</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> total <span class="token keyword">FROM</span> t_user<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">void</span> <span class="token function">getUserCount</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserCount<span class="token punctuation">&quot;</span></span> <span class="token attr-name">statementType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CALLABLE<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    { call get_user_count( #{total, mode=OUT, jdbcType=INTEGER} ) }</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">userMapper<span class="token punctuation">.</span><span class="token function">getUserCount</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Integer</span> userCount <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;total&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>userCount<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-in-out参数组合" tabindex="-1"><a class="header-anchor" href="#_3-in-out参数组合"><span>③.IN+OUT参数组合</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> count_user_by_sex<span class="token punctuation">(</span></span>
<span class="line">    <span class="token operator">IN</span> p_sex <span class="token keyword">INT</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">OUT</span> total <span class="token keyword">INT</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> total</span>
<span class="line">    <span class="token keyword">FROM</span> t_user</span>
<span class="line">    <span class="token keyword">WHERE</span> sex <span class="token operator">=</span> p_sex<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">void</span> <span class="token function">countUserBySex</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>countUserBySex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">statementType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CALLABLE<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    { call count_user_by_sex(</span>
<span class="line">        #{p_sex, mode=IN, jdbcType=INTEGER},</span>
<span class="line">        #{total, mode=OUT,jdbcType=INTEGER}</span>
<span class="line">        ) }</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">map2<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;p_sex&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">userMapper<span class="token punctuation">.</span><span class="token function">countUserBySex</span><span class="token punctuation">(</span>map2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Integer</span> total <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> map2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;total&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-返回结果集" tabindex="-1"><a class="header-anchor" href="#_4-返回结果集"><span>④.返回结果集</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> list_users<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> username<span class="token punctuation">,</span> sex <span class="token keyword">FROM</span> t_user<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">listUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>listUsers<span class="token punctuation">&quot;</span></span> <span class="token attr-name">statementType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CALLABLE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.learn.ssm.chapter5_sp.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    { call list_users() }</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">listUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[User{id=1, username=&#39;Max}]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>存储过程注意事项：</p><ol><li>statementType=&quot;CALLABLE&quot;</li><li>out参数要写jdbcType：<code>#{total, mode=OUT, jdbcType=INTEGER}</code></li><li>...</li></ol><blockquote><p>MyBatis 调用存储过程的本质是 JDBC CallableStatement， 用得好是性能工具，用不好是维护噩梦。</p></blockquote>`,174))])}const E=k(y,[["render",f]]),T=JSON.parse(`{"path":"/post/11_Mapper.html","title":"2-映射器(XxxMapper.xml)","lang":"zh-CN","frontmatter":{"title":"2-映射器(XxxMapper.xml)","lang":"zh-CN","author":"fireworks99","date":"2025-12-10"},"git":{"updatedTime":1767600213000,"contributors":[{"name":"fireworks99","username":"fireworks99","email":"2639237361@qq.com","commits":17,"url":"https://github.com/fireworks99"}],"changelog":[{"hash":"9cc0980c08b01ef53cfd270686ad7e700fbd52d6","time":1767600213000,"email":"46671672+fireworks99@users.noreply.github.com","author":"fireworks99","message":"'title'"},{"hash":"cecc7eaef5659be09a187b53eac45abf100cf916","time":1767599556000,"email":"46671672+fireworks99@users.noreply.github.com","author":"fireworks99","message":"'emoji'"},{"hash":"5362d9e3e742ae98b4e82fd6f9fe43fba9bf0fbe","time":1767595296000,"email":"46671672+fireworks99@users.noreply.github.com","author":"fireworks99","message":"'JDBC_ORM'"},{"hash":"77f58ff0d08f6018dcad1708f19b6598a026af03","time":1767582026000,"email":"46671672+fireworks99@users.noreply.github.com","author":"fireworks99","message":"'xml'"},{"hash":"1f1340fbb91842df0eff9dcfa522d8c4ddd9c893","time":1767581140000,"email":"46671672+fireworks99@users.noreply.github.com","author":"fireworks99","message":"'cache'"},{"hash":"57736860c7c10d5fec104d9b765bb15d9cfdc773","time":1767577190000,"email":"46671672+fireworks99@users.noreply.github.com","author":"fireworks99","message":"'user_role'"},{"hash":"14b4e5c73dbb40439f65e8846bd382cdefb6a18f","time":1767517857000,"email":"46671672+fireworks99@users.noreply.github.com","author":"fireworks99","message":"'join_cascade'"},{"hash":"8bf6356c02a0739e6a30bcf05ad13fd204491e98","time":1767513374000,"email":"46671672+fireworks99@users.noreply.github.com","author":"fireworks99","message":"'N+1'"},{"hash":"7f99b54445bd6151b41e8b2a68f4963920f06560","time":1767166394000,"email":"46671672+fireworks99@users.noreply.github.com","author":"fireworks99","message":"'DTO'"},{"hash":"fc111e8a8504987f1c05683ace54fda3518fe0cc","time":1767162172000,"email":"46671672+fireworks99@users.noreply.github.com","author":"fireworks99","message":"'Cascade'"},{"hash":"8409d6926ef56a251b68dc8a0ee45c64a50cc75c","time":1766129953000,"email":"2639237361@qq.com","author":"fireworks99","message":"'sql'"},{"hash":"459fd8c3b18d47426a21aa88b61100a68746a17b","time":1766050930000,"email":"2639237361@qq.com","author":"fireworks99","message":"'resultType=map'"},{"hash":"4b65a5e9a700bf5cd9e240a5b6e2a2f29653cf6d","time":1766040135000,"email":"2639237361@qq.com","author":"fireworks99","message":"'insert'"},{"hash":"69c982e8f72b7da8960787123c85f673830bb2d0","time":1766028254000,"email":"2639237361@qq.com","author":"fireworks99","message":"'RowBounds'"},{"hash":"033ba4e89bd680b0865979fde134895f68360842","time":1765424573000,"email":"2639237361@qq.com","author":"fireworks99","message":"'resultMap'"},{"hash":"d8116cb64e1e1ee863110aa93facebd204c3f7ad","time":1765416123000,"email":"2639237361@qq.com","author":"fireworks99","message":"'mapper'"},{"hash":"df7346d5df2888a753ff80e116a2ad65ac6279c7","time":1765364546000,"email":"2639237361@qq.com","author":"fireworks99","message":"'映射器'"}]},"filePathRelative":"post/11_Mapper.md"}`);export{E as comp,T as data};
