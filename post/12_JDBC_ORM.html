<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/SSMDocs/img/favicon.png"><title>2️⃣JDBC and ORM | SSM</title><meta name="description" content="SSM Exercise">
    <link rel="preload" href="/SSMDocs/assets/style-XOeJkavg.css" as="style"><link rel="stylesheet" href="/SSMDocs/assets/style-XOeJkavg.css">
    <link rel="modulepreload" href="/SSMDocs/assets/app-CGMk7QfY.js"><link rel="modulepreload" href="/SSMDocs/assets/12_JDBC_ORM.html-CNaUMSKs.js">
    <link rel="prefetch" href="/SSMDocs/assets/index.html-joMmMiej.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/01_Java_reflect.html-DS44g7dt.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/02_Dynamic_proxy.html-DcU_TQGD.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/03_Design_pattern.html-DzSo6gwo.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/04_Responce.html-C80zs_5x.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/05_Observer.html-fCcU6sNm.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/06_Factory.html-teNNKTa8.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/07_Builder.html-DsOD3y5e.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/08_Web_history.html-yY7Ki5qC.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/09_Mybatis_core.html-1uRQ4iKB.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/09_Mybatis_reflect.html-BQpRYolU.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/10_Mybatis_config.html-q1nFXlHS.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/11_Mapper.html-CBLUyiPw.js" as="script"><link rel="prefetch" href="/SSMDocs/assets/404.html-BoPhAIpS.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/SSMDocs/"><img class="vp-site-logo" src="/SSMDocs/img/logo.gif" alt="SSM"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">SSM</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/SSMDocs/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="友链"><span class="title">友链</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="友链"><span class="title">友链</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://fireworks99.github.io/" aria-label="我的博客" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->我的博客<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/fireworks99" aria-label="我的Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->我的Github<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/SSMDocs/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="友链"><span class="title">友链</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="友链"><span class="title">友链</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://fireworks99.github.io/" aria-label="我的博客" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->我的博客<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/fireworks99" aria-label="我的Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->我的Github<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/01_Java_reflect.html" aria-label="1️⃣Java反射技术"><!--[--><!--[--><!--]--><!--]-->1️⃣Java反射技术<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/02_Dynamic_proxy.html" aria-label="1️⃣动态代理模式"><!--[--><!--[--><!--]--><!--]-->1️⃣动态代理模式<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/03_Design_pattern.html" aria-label="1️⃣设计模式简介"><!--[--><!--[--><!--]--><!--]-->1️⃣设计模式简介<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/04_Responce.html" aria-label="1️⃣责任链模式"><!--[--><!--[--><!--]--><!--]-->1️⃣责任链模式<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/05_Observer.html" aria-label="1️⃣观察者模式"><!--[--><!--[--><!--]--><!--]-->1️⃣观察者模式<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/06_Factory.html" aria-label="1️⃣工厂模式与抽象工厂模式"><!--[--><!--[--><!--]--><!--]-->1️⃣工厂模式与抽象工厂模式<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/07_Builder.html" aria-label="1️⃣建造者模式"><!--[--><!--[--><!--]--><!--]-->1️⃣建造者模式<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/08_Web_history.html" aria-label="2️⃣Web开发历史"><!--[--><!--[--><!--]--><!--]-->2️⃣Web开发历史<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/09_Mybatis_core.html" aria-label="2️⃣Mybatis核心组件"><!--[--><!--[--><!--]--><!--]-->2️⃣Mybatis核心组件<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/09_Mybatis_reflect.html" aria-label="2️⃣Mybatis的反射"><!--[--><!--[--><!--]--><!--]-->2️⃣Mybatis的反射<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/10_Mybatis_config.html" aria-label="2️⃣Mybatis配置(mybatis-config.xml)"><!--[--><!--[--><!--]--><!--]-->2️⃣Mybatis配置(mybatis-config.xml)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/SSMDocs/post/11_Mapper.html" aria-label="2️⃣映射器(XxxMapper.xml)"><!--[--><!--[--><!--]--><!--]-->2️⃣映射器(XxxMapper.xml)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/SSMDocs/post/12_JDBC_ORM.html" aria-label="2️⃣JDBC and ORM"><!--[--><!--[--><!--]--><!--]-->2️⃣JDBC and ORM<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><nav class="table-of-contents"><ul><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#jdbc" class="router-link-active router-link-exact-active">JDBC</a><ul><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_1-为什么需要-jdbc" class="router-link-active router-link-exact-active">①.为什么需要 JDBC？</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_2-jdbc-能做什么" class="router-link-active router-link-exact-active">②.JDBC 能做什么？</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_3-jdbc-的核心组成" class="router-link-active router-link-exact-active">③.JDBC 的核心组成</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_4-一个完整-jdbc-示例" class="router-link-active router-link-exact-active">④.一个完整 JDBC 示例</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_5-jdbc-的事务管理" class="router-link-active router-link-exact-active">⑤.JDBC 的事务管理</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_6-jdbc-的缺点" class="router-link-active router-link-exact-active">⑥.JDBC 的缺点</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_7-jdbc-与-mybatis-spring-的关系" class="router-link-active router-link-exact-active">⑦.JDBC 与 MyBatis / Spring 的关系</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_8-总结" class="router-link-active router-link-exact-active">⑧.总结</a></li></ul></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#orm" class="router-link-active router-link-exact-active">ORM</a><ul><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_1-orm诞生背景" class="router-link-active router-link-exact-active">①.ORM诞生背景</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_2-orm-做了什么" class="router-link-active router-link-exact-active">②.ORM 做了什么？</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_3-常见-orm-框架" class="router-link-active router-link-exact-active">③.常见 ORM 框架</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_4-mybatis-is-orm" class="router-link-active router-link-exact-active">④.MyBatis is ORM？</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_5-全自动-vs-半自动" class="router-link-active router-link-exact-active">⑤.全自动 vs 半自动</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_6-orm-的优点" class="router-link-active router-link-exact-active">⑥.ORM 的优点</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_7-orm-的缺点" class="router-link-active router-link-exact-active">⑦.ORM 的缺点</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_8-orm应用场景" class="router-link-active router-link-exact-active">⑧.ORM应用场景</a></li><li><a aria-current="page" href="/SSMDocs/post/12_JDBC_ORM.html#_9-总结" class="router-link-active router-link-exact-active">⑨.总结</a></li></ul></li></ul></nav><p><img src="/SSMDocs/assets/JDBC.drawio-BwKvufXM.svg" alt="JDBC ORM"></p><h2 id="jdbc" tabindex="-1"><a class="header-anchor" href="#jdbc"><span>JDBC</span></a></h2><p><strong>JDBC</strong> 是 <strong>Java Database Connectivity</strong> 的缩写，是 <strong>Java 访问关系型数据库的标准 API</strong>。</p><blockquote><p><strong>JDBC = Java 程序与数据库之间的“通用翻译官 / 规范接口”</strong></p></blockquote><h3 id="_1-为什么需要-jdbc" tabindex="-1"><a class="header-anchor" href="#_1-为什么需要-jdbc"><span>①.为什么需要 JDBC？</span></a></h3><p>不同数据库（MySQL / Oracle / PostgreSQL）<strong>协议不同、语法细节不同</strong>， 如果 Java 直接对接数据库会非常麻烦。</p><p>JDBC 的作用就是：</p><ul><li>Java <strong>只认 JDBC 接口</strong></li><li>各数据库厂商 <strong>实现 JDBC 驱动</strong></li><li>程序 <strong>不用关心底层数据库差异</strong></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Java 程序</span>
<span class="line">   ↓ JDBC API</span>
<span class="line">数据库驱动（MySQL / Oracle / PG）</span>
<span class="line">   ↓</span>
<span class="line">数据库</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_2-jdbc-能做什么" tabindex="-1"><a class="header-anchor" href="#_2-jdbc-能做什么"><span>②.JDBC 能做什么？</span></a></h3><p>JDBC 允许 Java 程序：</p><ul><li>连接数据库</li><li>执行 SQL（CRUD）</li><li>调用存储过程</li><li>管理事务</li><li>处理结果集</li></ul><hr><h3 id="_3-jdbc-的核心组成" tabindex="-1"><a class="header-anchor" href="#_3-jdbc-的核心组成"><span>③.JDBC 的核心组成</span></a></h3><h4 id="_1-driver-驱动" tabindex="-1"><a class="header-anchor" href="#_1-driver-驱动"><span>(1).Driver（驱动）</span></a></h4><ul><li>数据库厂商提供</li><li>负责和数据库“说话”</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>（JDBC 4 以后一般自动加载）</p><hr><h4 id="_2-connection-连接" tabindex="-1"><a class="header-anchor" href="#_2-connection-连接"><span>(2).Connection（连接）</span></a></h4><p>代表一次数据库连接：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span></span>
<span class="line">    url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_3-statement-preparedstatement-callablestatement" tabindex="-1"><a class="header-anchor" href="#_3-statement-preparedstatement-callablestatement"><span>(3).Statement / PreparedStatement / CallableStatement</span></a></h4><p>Statement（不推荐）</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">Statement</span> stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">stmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM t_user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>❌ SQL 注入风险</p><hr><p>PreparedStatement（最常用）</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token string">&quot;SELECT * FROM t_user WHERE id = ?&quot;</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ps<span class="token punctuation">.</span><span class="token function">setLong</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>✔ 防 SQL 注入 ✔ 性能更好（预编译）</p><hr><p>CallableStatement（存储过程）</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">CallableStatement</span> cs <span class="token operator">=</span></span>
<span class="line">    conn<span class="token punctuation">.</span><span class="token function">prepareCall</span><span class="token punctuation">(</span><span class="token string">&quot;{call get_user_count(?)}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_4-resultset-结果集" tabindex="-1"><a class="header-anchor" href="#_4-resultset-结果集"><span>(4).ResultSet（结果集）</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    rs<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_4-一个完整-jdbc-示例" tabindex="-1"><a class="header-anchor" href="#_4-一个完整-jdbc-示例"><span>④.一个完整 JDBC 示例</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">&quot;SELECT id, username FROM t_user WHERE id = ?&quot;</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ps<span class="token punctuation">.</span><span class="token function">setLong</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    rs <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">    rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>代码冗长、易出错、资源管理麻烦</strong></p><hr><h3 id="_5-jdbc-的事务管理" tabindex="-1"><a class="header-anchor" href="#_5-jdbc-的事务管理"><span>⑤.JDBC 的事务管理</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line">conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">ps<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ps<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>出错：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line">conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h3 id="_6-jdbc-的缺点" tabindex="-1"><a class="header-anchor" href="#_6-jdbc-的缺点"><span>⑥.JDBC 的缺点</span></a></h3><table><thead><tr><th>问题</th><th>说明</th></tr></thead><tbody><tr><td>SQL 写死</td><td>可读性差</td></tr><tr><td>模板代码多</td><td>try-catch + close</td></tr><tr><td>手动映射</td><td>ResultSet → 对象</td></tr><tr><td>难维护</td><td>大量重复代码</td></tr></tbody></table><p><strong>ORM 框架就是为了解决这些问题</strong></p><hr><h3 id="_7-jdbc-与-mybatis-spring-的关系" tabindex="-1"><a class="header-anchor" href="#_7-jdbc-与-mybatis-spring-的关系"><span>⑦.JDBC 与 MyBatis / Spring 的关系</span></a></h3><p>JDBC vs MyBatis</p><table><thead><tr><th>JDBC</th><th>MyBatis</th></tr></thead><tbody><tr><td>低层 API</td><td>封装 JDBC</td></tr><tr><td>手写 SQL + 映射</td><td>自动映射</td></tr><tr><td>手动事务</td><td>可交给 Spring</td></tr><tr><td>易出错</td><td>更安全</td></tr></tbody></table><p><strong>MyBatis 底层依然是 JDBC</strong></p><hr><p>Spring JDBC / MyBatis / JPA 的层级</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Spring Transaction</span>
<span class="line">       ↓</span>
<span class="line">MyBatis / JPA / JdbcTemplate</span>
<span class="line">       ↓</span>
<span class="line">JDBC</span>
<span class="line">       ↓</span>
<span class="line">数据库驱动</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_8-总结" tabindex="-1"><a class="header-anchor" href="#_8-总结"><span>⑧.总结</span></a></h3><blockquote><p><strong>JDBC 是 Java 访问数据库的底层标准 API， MyBatis、JPA、Spring JDBC 本质上都是对 JDBC 的封装。</strong></p></blockquote><hr><h2 id="orm" tabindex="-1"><a class="header-anchor" href="#orm"><span>ORM</span></a></h2><p><strong>ORM</strong> 是 <strong>Object-Relational Mapping（对象关系映射）</strong> 的缩写。</p><blockquote><p><strong>ORM = 把“数据库的表”映射成“程序里的对象”， 让你用操作对象的方式来操作数据库。</strong></p></blockquote><hr><h3 id="_1-orm诞生背景" tabindex="-1"><a class="header-anchor" href="#_1-orm诞生背景"><span>①.ORM诞生背景</span></a></h3><p><strong>面向对象世界</strong> 和 <strong>关系型数据库世界</strong> 天然不一致。</p><table><thead><tr><th>面向对象（Java）</th><th>关系型数据库（MySQL）</th></tr></thead><tbody><tr><td>类（Class）</td><td>表（Table）</td></tr><tr><td>对象（Object）</td><td>行（Row）</td></tr><tr><td>属性（Field）</td><td>列（Column）</td></tr><tr><td>继承、多态</td><td>没有</td></tr><tr><td>引用关系</td><td>外键</td></tr></tbody></table><p>ORM 的作用就是： <strong>在这两个世界之间搭一座桥</strong></p><hr><h3 id="_2-orm-做了什么" tabindex="-1"><a class="header-anchor" href="#_2-orm-做了什么"><span>②.ORM 做了什么？</span></a></h3><h4 id="_1️⃣-表-↔-类" tabindex="-1"><a class="header-anchor" href="#_1️⃣-表-↔-类"><span>1️⃣ 表 ↔ 类</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line">t_user</span>
<span class="line">class <span class="token keyword">User</span> {</span>
<span class="line">    Long id<span class="token punctuation">;</span></span>
<span class="line">    String username<span class="token punctuation">;</span></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_2️⃣-行-↔-对象" tabindex="-1"><a class="header-anchor" href="#_2️⃣-行-↔-对象"><span>2️⃣ 行 ↔ 对象</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line">id <span class="token operator">|</span> username</span>
<span class="line"><span class="token number">1</span>  <span class="token operator">|</span> Tom</span>
<span class="line"><span class="token keyword">User</span> <span class="token keyword">user</span> <span class="token operator">=</span> new <span class="token keyword">User</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_3️⃣-crud-↔-对象操作" tabindex="-1"><a class="header-anchor" href="#_3️⃣-crud-↔-对象操作"><span>3️⃣ CRUD ↔ 对象操作</span></a></h4><p>没有 ORM（JDBC）</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">User</span> u <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">u<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>有 ORM</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">User</span> u <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h3 id="_3-常见-orm-框架" tabindex="-1"><a class="header-anchor" href="#_3-常见-orm-框架"><span>③.常见 ORM 框架</span></a></h3><p>(Java里的)</p><table><thead><tr><th>框架</th><th>特点</th></tr></thead><tbody><tr><td>Hibernate</td><td>全自动 ORM</td></tr><tr><td>JPA</td><td>ORM 规范</td></tr><tr><td>MyBatis</td><td>半自动 ORM</td></tr><tr><td>MyBatis-Plus</td><td>MyBatis 增强</td></tr></tbody></table><hr><h3 id="_4-mybatis-is-orm" tabindex="-1"><a class="header-anchor" href="#_4-mybatis-is-orm"><span>④.MyBatis is ORM？</span></a></h3><blockquote><p><strong>Mybatis是“半自动 ORM”</strong></p></blockquote><table><thead><tr><th>能力</th><th>MyBatis</th></tr></thead><tbody><tr><td>对象映射</td><td>✅</td></tr><tr><td>SQL 自动生成</td><td>❌（你写）</td></tr><tr><td>关系映射</td><td>✅（resultMap）</td></tr><tr><td>缓存</td><td>✅</td></tr><tr><td>灵活性</td><td>⭐⭐⭐⭐⭐</td></tr></tbody></table><p><strong>你控制 SQL，MyBatis 负责映射</strong></p><hr><h3 id="_5-全自动-vs-半自动" tabindex="-1"><a class="header-anchor" href="#_5-全自动-vs-半自动"><span>⑤.全自动 vs 半自动</span></a></h3><table><thead><tr><th>对比项</th><th>Hibernate / JPA</th><th>MyBatis</th></tr></thead><tbody><tr><td>SQL 控制</td><td>❌</td><td>✅</td></tr><tr><td>学习成本</td><td>高</td><td>低</td></tr><tr><td>复杂 SQL</td><td>痛苦</td><td>友好</td></tr><tr><td>性能可控</td><td>一般</td><td>高</td></tr><tr><td>适合场景</td><td>标准 CRUD</td><td>复杂业务</td></tr></tbody></table><hr><h3 id="_6-orm-的优点" tabindex="-1"><a class="header-anchor" href="#_6-orm-的优点"><span>⑥.ORM 的优点</span></a></h3><p>✔ 减少样板代码 ✔ 提高开发效率 ✔ 面向对象思维 ✔ 更易维护</p><hr><h3 id="_7-orm-的缺点" tabindex="-1"><a class="header-anchor" href="#_7-orm-的缺点"><span>⑦.ORM 的缺点</span></a></h3><p>❌ 抽象层过厚 ❌ 复杂 SQL 难写 ❌ 性能不可控（不当使用） ❌ 不适合极端性能场景</p><hr><h3 id="_8-orm应用场景" tabindex="-1"><a class="header-anchor" href="#_8-orm应用场景"><span>⑧.ORM应用场景</span></a></h3><p>适合</p><ul><li>业务系统</li><li>CRUD 为主</li><li>中小型项目</li></ul><p>不适合</p><ul><li>超复杂报表</li><li>极致性能场景</li><li>数据库强绑定逻辑</li></ul><hr><h3 id="_9-总结" tabindex="-1"><a class="header-anchor" href="#_9-总结"><span>⑨.总结</span></a></h3><blockquote><p><strong>ORM 是让程序员“用对象思维操作数据库”的技术， 本质是对象世界与关系世界的桥梁。</strong></p></blockquote></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最近更新: </span><time class="meta-item-info" datetime="2026-01-05T07:52:36.000Z" data-allow-mismatch>2026/1/5 07:52</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 46671672+fireworks99@users.noreply.github.com">fireworks99</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/SSMDocs/post/11_Mapper.html" aria-label="2️⃣映射器(XxxMapper.xml)"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">2️⃣映射器(XxxMapper.xml)</span></div><!--]--></a><!----></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/SSMDocs/assets/app-CGMk7QfY.js" defer></script>
  </body>
</html>
